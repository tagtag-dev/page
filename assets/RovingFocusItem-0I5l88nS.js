import{i as e,r as t}from"./Presence-jUNGdmIs.js";import{Aa as n,Ba as r,Ha as i,Ii as a,Ja as o,Ki as s,Pa as c,Ri as l,Ua as u,Vn as d,Wi as f,Xi as p,Yi as m,aa as h,ba as g,bn as _,ca as v,ga as y,ia as b,kn as x,ln as S,qi as C,sa as w,ta as T,ua as E,un as D,wa as O,xa as k,xi as A,za as j}from"./index-DX59uxwP.js";function M(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function N(e){let t=C(),n=t?.type.emits,r={};return n?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),n?.forEach(t=>{r[o(u(t))]=(...n)=>e(t,...n)}),r}function P(e){let t=C(),n=Object.keys(t?.type.props??{}).reduce((e,n)=>{let r=(t?.type.props[n]).default;return r!==void 0&&(e[n]=r),e},{}),r=j(e);return a(()=>{let e={},i=t?.vnode.props??{};return Object.keys(i).forEach(t=>{e[u(t)]=i[t]}),Object.keys({...n,...e}).reduce((e,t)=>(r.value[t]!==void 0&&(e[t]=r.value[t]),e),{})})}function F(e,t){let n=P(e),r=t?N(t):{};return a(()=>({...n.value,...r}))}var I=0;function L(t,n=`reka`){if(t)return t;if(`useId`in A)return`${n}-${y?.()}`;let r=e({useId:void 0});return r.useId?`${n}-${r.useId()}`:`${n}-${++I}`}function R(){let e=c();return{primitiveElement:e,currentElement:a(()=>[`#text`,`#comment`].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:_(e))}}var z=`data-reka-collection-item`;function B(e={}){let{key:t=``,isProvider:r=!1}=e,i=`${t}CollectionProvider`,o;if(r){let e=c(new Map);o={collectionRef:c(),itemMap:e},v(i,o)}else o=p(i);let l=(e=!1)=>{let t=o.collectionRef.value;if(!t)return[];let n=Array.from(t.querySelectorAll(`[${z}]`)),r=Array.from(o.itemMap.value.values()).sort((e,t)=>n.indexOf(e.ref)-n.indexOf(t.ref));return e?r:r.filter(e=>e.ref.dataset.disabled!==``)},u=s({name:`CollectionSlot`,inheritAttrs:!1,setup(e,{slots:t,attrs:n}){let{primitiveElement:r,currentElement:i}=R();return g(i,()=>{o.collectionRef.value=i.value}),()=>m(D,{ref:r,...n},t)}}),d=s({name:`CollectionItem`,inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(e,{slots:t,attrs:r}){let{primitiveElement:i,currentElement:a}=R();return k(t=>{if(a.value){let r=n(a.value);o.itemMap.value.set(r,{ref:a.value,value:e.value}),t(()=>o.itemMap.value.delete(r))}}),()=>m(D,{...r,[z]:``,ref:i},t)}});return{getItems:l,reactiveItems:a(()=>Array.from(o.itemMap.value.values())),itemMapSize:a(()=>o.itemMap.value.size),CollectionSlot:u,CollectionItem:d}}var V=`rovingFocusGroup.onEntryFocus`,H={bubbles:!1,cancelable:!0},U={ArrowLeft:`prev`,ArrowUp:`prev`,ArrowRight:`next`,ArrowDown:`next`,PageUp:`first`,Home:`first`,PageDown:`last`,End:`last`};function W(e,t){return t===`rtl`?e===`ArrowLeft`?`ArrowRight`:e===`ArrowRight`?`ArrowLeft`:e:e}function G(e,t,n){let r=W(e.key,n);if(!(t===`vertical`&&[`ArrowLeft`,`ArrowRight`].includes(r))&&!(t===`horizontal`&&[`ArrowUp`,`ArrowDown`].includes(r)))return U[r]}function K(e,t=!1){let n=M();for(let r of e)if(r===n||(r.focus({preventScroll:t}),M()!==n))return}function q(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var[J,Y]=d(`RovingFocusGroup`),X=s({__name:`RovingFocusGroup`,props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:[`entryFocus`,`update:currentTabStopId`],setup(e,{expose:n,emit:a}){let o=e,s=a,{loop:u,orientation:d,dir:p}=r(o),m=t(p),h=x(o,`currentTabStopId`,s,{defaultValue:o.defaultCurrentTabStopId,passive:o.currentTabStopId===void 0}),g=c(!1),_=c(!1),v=c(0),{getItems:y,CollectionSlot:b}=B({isProvider:!0});function C(e){let t=!_.value;if(e.currentTarget&&e.target===e.currentTarget&&t&&!g.value){let t=new CustomEvent(V,H);if(e.currentTarget.dispatchEvent(t),s(`entryFocus`,t),!t.defaultPrevented){let e=y().map(e=>e.ref).filter(e=>e.dataset.disabled!==``);K([e.find(e=>e.getAttribute(`data-active`)===``),e.find(e=>e.getAttribute(`data-highlighted`)===``),e.find(e=>e.id===h.value),...e].filter(Boolean),o.preventScrollOnEntryFocus)}}_.value=!1}function T(){setTimeout(()=>{_.value=!1},1)}return n({getItems:y}),Y({loop:u,dir:m,orientation:d,currentTabStopId:h,onItemFocus:e=>{h.value=e},onItemShiftTab:()=>{g.value=!0},onFocusableItemAdd:()=>{v.value++},onFocusableItemRemove:()=>{v.value--}}),(e,t)=>(w(),l(i(b),null,{default:O(()=>[f(i(S),{tabindex:g.value||v.value===0?-1:0,"data-orientation":i(d),as:e.as,"as-child":e.asChild,dir:i(m),style:{outline:`none`},onMousedown:t[0]||=e=>_.value=!0,onMouseup:T,onFocus:C,onBlur:t[1]||=e=>g.value=!1},{default:O(()=>[E(e.$slots,`default`)]),_:3},8,[`tabindex`,`data-orientation`,`as`,`as-child`,`dir`])]),_:3}))}}),Z=s({__name:`RovingFocusItem`,props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=e,n=J(),r=L(),o=a(()=>t.tabStopId||r),s=a(()=>n.currentTabStopId.value===o.value),{getItems:c,CollectionItem:u}=B();b(()=>{t.focusable&&n.onFocusableItemAdd()}),h(()=>{t.focusable&&n.onFocusableItemRemove()});function d(e){if(e.key===`Tab`&&e.shiftKey){n.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let r=G(e,n.orientation.value,n.dir.value);if(r!==void 0){if(e.metaKey||e.ctrlKey||e.altKey||!t.allowShiftKey&&e.shiftKey)return;e.preventDefault();let i=[...c().map(e=>e.ref).filter(e=>e.dataset.disabled!==``)];if(r===`last`)i.reverse();else if(r===`prev`||r===`next`){r===`prev`&&i.reverse();let t=i.indexOf(e.currentTarget);i=n.loop.value?q(i,t+1):i.slice(t+1)}T(()=>K(i))}}return(e,t)=>(w(),l(i(u),null,{default:O(()=>[f(i(S),{tabindex:s.value?0:-1,"data-orientation":i(n).orientation.value,"data-active":e.active?``:void 0,"data-disabled":e.focusable?void 0:``,as:e.as,"as-child":e.asChild,onMousedown:t[0]||=t=>{e.focusable?i(n).onItemFocus(o.value):t.preventDefault()},onFocus:t[1]||=e=>i(n).onItemFocus(o.value),onKeydown:d},{default:O(()=>[E(e.$slots,`default`)]),_:3},8,[`tabindex`,`data-orientation`,`data-active`,`data-disabled`,`as`,`as-child`])]),_:3}))}});export{R as a,P as c,B as i,N as l,X as n,L as o,G as r,F as s,Z as t,M as u};