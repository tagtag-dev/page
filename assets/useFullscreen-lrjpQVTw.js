import{Ba as e,Fi as t,Hn as n,Na as r,ar as i,bn as a,br as o,ea as s,i as c,ir as l,xn as u,ya as d,yr as f}from"./index-D6Cod0pL.js";function p(e){return e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase()).replace(/^[a-z]/,e=>e.toUpperCase())}function m(e){if(e)return c[p(e)]}function h(n){return t(()=>m(e(n)))}function g(e){let{scrollContainerRef:c,tabsContainerRef:p}=e,m=f(),h=o(),{t:g,locale:_}=l(),v=n(),y=i(),b=r(!1),{x,arrivedState:S}=u(c,{behavior:`smooth`}),C=()=>{s(()=>{let e=c.value,t=p.value;if(!e||!t){b.value=!1;return}b.value=t.scrollWidth>e.clientWidth})};a(c,C),d(()=>v.tabs.length,C,{immediate:!0});let w=t(()=>b.value&&!S.left),T=t(()=>b.value&&!S.right),E=t(()=>{if(!b.value)return 0;let e=c.value,t=p.value;if(!e||!t)return 0;let n=t.scrollWidth-e.clientWidth;return n<=0?0:x.value/n*100}),D=e=>{s(()=>{let t=p.value?.querySelector(`[data-tab-path="${e}"]`);if(t&&c.value){let e=c.value.getBoundingClientRect(),n=t.getBoundingClientRect(),r=c.value.scrollLeft,i=n.left+n.width/2-e.left,a=e.width/2,o=r+i-a;c.value.scrollTo({left:o,behavior:`smooth`})}})},O=()=>{c.value?.scrollBy({left:-200,behavior:`smooth`})},k=()=>{c.value?.scrollBy({left:200,behavior:`smooth`})},A=()=>{c.value?.scrollTo({left:0,behavior:`smooth`})},j=()=>{c.value&&c.value.scrollTo({left:c.value.scrollWidth,behavior:`smooth`})},M=e=>{v.activateTab(e),h.push(e)},N=e=>{v.removeTab(e)},P=e=>{v.refreshTab(e),window.dispatchEvent(new CustomEvent(`tab-refresh`,{detail:{path:e}}))},F=e=>{v.closeOtherTabs(e)},I=e=>{v.closeLeftTabs(e)},L=e=>{v.closeRightTabs(e)},R=()=>{v.closeAllTabs();let e=v.tabs.find(e=>e.affix);e&&h.push(e.path)},z=r(null);return d([()=>m.path,()=>y.isLoaded],([e,t])=>{if(!e||!t)return;let n=v.tabs.find(t=>t.path===e);if(n){let t=y.getRouteTitle(e),r=y.flatMenus.find(t=>t.path===e);t&&t!==n.title&&(n.title=t),r?.icon&&!n.icon&&(n.icon=r.icon),v.activateTab(e),D(e);return}let r=y.getRouteTitle(e),i=y.flatMenus.find(t=>t.path===e);v.addTab({path:e,title:r,icon:i?.icon,affix:e===`/dashboard`}),D(e)},{immediate:!0}),{isOverflowing:b,canScrollLeft:w,canScrollRight:T,scrollProgress:E,scrollToTab:D,scrollLeft:O,scrollRight:k,scrollToStart:A,scrollToEnd:j,handleTabClick:M,handleCloseTab:N,handleRefreshTab:P,handleCloseOthers:F,handleCloseLeft:I,handleCloseRight:L,handleCloseAll:R,handleDragStart:(e,t)=>{z.value=t,e.dataTransfer&&(e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t))},handleDragOver:(e,t)=>{if(e.preventDefault(),!z.value||z.value===t)return;let n=v.tabs.findIndex(e=>e.path===z.value),r=v.tabs.findIndex(e=>e.path===t);if(n!==-1&&r!==-1){let e=[...v.tabs],[t]=e.splice(n,1);e.splice(r,0,t),v.tabs=e}},handleDragEnd:()=>{z.value=null}}}var _=r(!1),v=r(null),y=!1,b=()=>{_.value=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement),v.value=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},x=()=>{b()},S=()=>{y||typeof document>`u`||(b(),document.addEventListener(`fullscreenchange`,x),document.addEventListener(`webkitfullscreenchange`,x),document.addEventListener(`mozfullscreenchange`,x),document.addEventListener(`MSFullscreenChange`,x),y=!0)};function C(e){S();let t=()=>e||document.documentElement,n=async()=>{let e=t();if(!e){console.warn(`[useFullscreen] Target element not found`);return}try{e.requestFullscreen?await e.requestFullscreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.msRequestFullscreen?await e.msRequestFullscreen():console.warn(`[useFullscreen] Fullscreen API is not supported`)}catch(e){console.error(`[useFullscreen] Failed to enter fullscreen:`,e)}},r=async()=>{try{document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.msExitFullscreen&&await document.msExitFullscreen()}catch(e){console.error(`[useFullscreen] Failed to exit fullscreen:`,e)}};return{isFullscreen:_,fullscreenElement:v,enter:n,exit:r,toggle:async()=>{_.value?await r():await n()},isSupported:()=>{let e=t();return!!(e&&(e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen))}}}export{h as a,m as i,C as n,g as r,_ as t};