import{Ga as e,Gn as t,Ha as n,Ii as r,Ji as i,Ki as a,Pa as o,Ri as s,Vi as c,Wa as l,Wi as u,ar as d,ba as f,ir as p,sa as m,sn as h,ua as g,wa as _,zi as v}from"./index-Bdnse1ke.js";import{B as y,L as b,t as x}from"./dist-CIVP1JAM.js";import{i as S,n as C,r as w,t as T}from"./theme-shared-CKGE9ZaP.js";import{t as E}from"./useResponsive-Drj8-vqi.js";function D(){let e=t();return r(()=>{let t=e.currentColors,n=e.layoutConfig.radius,r=e.currentMode===`dark`,i=C(r),a=T(n),o=w(t);return{algorithm:r?x.darkAlgorithm:x.defaultAlgorithm,token:{colorPrimary:S(t.primary),colorBgContainer:S(t.background),colorBgElevated:S(t.card),colorText:S(t.foreground),colorTextSecondary:S(t.mutedForeground),colorBorder:S(t.border),colorError:S(t.destructive),borderRadius:a.borderRadius,borderRadiusSM:a.borderRadiusSM,borderRadiusLG:a.borderRadiusLG,boxShadow:i.boxShadowTertiary,boxShadowSecondary:i.boxShadowTertiary,paddingSM:8,padding:12,paddingMD:16,paddingLG:20,paddingXL:24,fontSizeSM:12,fontSize:14,fontSizeLG:16,fontSizeXL:18},components:{...o,Modal:{colorBgElevated:S(t.card),colorText:S(t.foreground),colorTextHeading:S(t.foreground),colorBorder:S(t.border),colorPrimary:S(t.primary),borderRadius:a.borderRadiusLG,boxShadow:i.boxShadowTertiary},Button:{colorPrimary:S(t.primary),colorPrimaryHover:S(t.primary),colorPrimaryActive:S(t.primary),colorText:S(t.foreground),colorBgContainer:S(t.background),colorBorder:S(t.border),boxShadow:`none`,borderRadius:a.borderRadius}}}})}var O=a({name:`TModal`,__name:`TModal`,props:{open:{type:Boolean,default:!1},confirmLoading:{type:Boolean,default:!1},footer:{type:[Boolean,Function,String,Number,null,Object],default:void 0},class:{},rootClass:{},rootStyle:{},classes:{},styles:{},formRef:{default:void 0},closeOnSubmitSuccess:{type:Boolean,default:!1},responsive:{},title:{type:[String,Function,Number,null,Object,Boolean]},width:{default:520},centered:{type:Boolean,default:!1},mask:{type:[Object,Boolean],default:!0},maskClosable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},destroyOnHidden:{type:Boolean,default:!1},okText:{type:[String,Function,Number,null,Object,Boolean],default:void 0},cancelText:{type:[String,Function,Number,null,Object,Boolean],default:void 0},okType:{default:`primary`},okButtonProps:{},cancelButtonProps:{},closable:{type:[Boolean,Object],default:!0},closeIcon:{type:[Function,String,Number,null,Object,Boolean]},style:{},wrapClassName:{},zIndex:{default:1e3},modalRender:{},forceRender:{type:Boolean,default:!1},getContainer:{type:[String,Function,Boolean]},transitionName:{},maskTransitionName:{},focusTriggerAfterClose:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:[`update:open`,`ok`,`cancel`,`afterClose`,`afterOpenChange`,`submit`],setup(t,{expose:a,emit:x}){let{locale:S}=d(),{smallerThan:C,isMobile:w}=E(),T=r(()=>F.responsive||{enabled:!0}),O=r(()=>T.value.enabled!==!1),k=r(()=>T.value.mobileBreakpoint||`md`),A=r(()=>O.value?C(k.value):!1),j=r(()=>A.value?T.value.fullScreenOnMobile?`100%`:T.value.fullWidthOnMobile?T.value.mobileMaxWidth||`calc(100vw - 32px)`:T.value.mobileWidth||F.width:F.width),M=r(()=>!A.value||!T.value.fullScreenOnMobile?F.styles:{...F.styles,body:{...F.styles?.body,maxHeight:`calc(100vh - 200px)`,overflowY:`auto`}}),N=o(null);async function P(){let e=S.value;N.value=await p(e)}f(S,P,{immediate:!0});let F=t,I=x,L=o(F.open),R=o(F.confirmLoading);f(()=>F.open,e=>{L.value=e},{immediate:!0}),f(()=>F.confirmLoading,e=>{R.value=e},{immediate:!0});let z=r(()=>{if(typeof F.class==`string`)return F.class;if(Array.isArray(F.class))return h(F.class)}),B=D();async function V(e){let t=F.formRef?n(F.formRef):void 0;if(t)try{R.value=!0,I(`submit`,await t.validate()),I(`ok`,e),F.closeOnSubmitSuccess&&q()}catch(e){console.log(`表单验证失败:`,e)}finally{R.value=!1}else I(`ok`,e)}function H(e){I(`cancel`,e),I(`update:open`,!1)}function U(e){L.value=e,I(`update:open`,e)}function W(){I(`afterClose`)}function G(e){I(`afterOpenChange`,e)}function K(){L.value=!0,I(`update:open`,!0)}function q(){L.value=!1,I(`update:open`,!1)}function J(e){R.value=e}function Y(){return L.value}return a({open:K,close:q,setConfirmLoading:J,isOpen:Y}),(r,a)=>N.value?(m(),s(n(y),{key:0,locale:N.value,theme:n(B)},{default:_(()=>[u(n(b),{open:L.value,title:t.title,width:j.value,centered:t.centered,mask:t.mask,"mask-closable":t.maskClosable,keyboard:t.keyboard,"destroy-on-hidden":t.destroyOnHidden,"ok-text":t.okText,"cancel-text":t.cancelText,"ok-type":t.okType,"ok-button-props":t.okButtonProps,"cancel-button-props":t.cancelButtonProps,closable:t.closable,"close-icon":t.closeIcon,"confirm-loading":R.value,"z-index":t.zIndex,footer:typeof t.footer==`boolean`?t.footer?void 0:null:t.footer,"force-render":t.forceRender,"get-container":t.getContainer,"transition-name":t.transitionName,"mask-transition-name":t.maskTransitionName,"focus-trigger-after-close":t.focusTriggerAfterClose,loading:t.loading,"modal-render":t.modalRender,"root-class":t.rootClass,"root-style":t.rootStyle,classes:M.value?{...t.classes,...M.value}:t.classes,styles:M.value,class:l(n(h)(`t-modal`,{"t-modal-mobile":A.value,"t-modal-fullscreen":A.value&&T.value.fullScreenOnMobile},z.value)),"wrap-class-name":t.wrapClassName,onOk:V,onCancel:H,"onUpdate:open":U,onAfterClose:W,onAfterOpenChange:G},c({default:_(()=>[g(r.$slots,`default`)]),_:2},[r.$slots.title?{name:`title`,fn:_(()=>[g(r.$slots,`title`)]),key:`0`}:void 0,r.$slots.footer?{name:`footer`,fn:_(t=>[g(r.$slots,`footer`,e(i(t)))]),key:`1`}:void 0,r.$slots.okText?{name:`okText`,fn:_(()=>[g(r.$slots,`okText`)]),key:`2`}:void 0,r.$slots.cancelText?{name:`cancelText`,fn:_(()=>[g(r.$slots,`cancelText`)]),key:`3`}:void 0,r.$slots.closeIcon?{name:`closeIcon`,fn:_(()=>[g(r.$slots,`closeIcon`)]),key:`4`}:void 0,r.$slots.modalRender?{name:`modalRender`,fn:_(({node:e})=>[g(r.$slots,`modalRender`,{node:e})]),key:`5`}:void 0]),1032,`open.title.width.centered.mask.mask-closable.keyboard.destroy-on-hidden.ok-text.cancel-text.ok-type.ok-button-props.cancel-button-props.closable.close-icon.confirm-loading.z-index.footer.force-render.get-container.transition-name.mask-transition-name.focus-trigger-after-close.loading.modal-render.root-class.root-style.classes.styles.class.wrap-class-name`.split(`.`))]),_:3},8,[`locale`,`theme`])):v(``,!0)}});export{O as t};