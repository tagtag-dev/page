import{Ai as e,Bi as t,Ca as n,Fi as r,Gi as i,Hi as a,Ia as o,Ii as s,Ka as c,Li as l,Na as u,Ri as d,Ua as f,Ui as p,Va as m,Wn as h,_a as g,ca as _,ir as v,la as y,oa as b,rr as x,sn as S,ya as C,zi as w}from"./index-D6Cod0pL.js";import{B as T,c as E,t as D}from"./dist-D3XftLPo.js";import{i as O,n as k,r as A,t as j}from"./theme-shared-BpTdpb0d.js";import{t as M}from"./useTableColumns-qs-cYpaB.js";function N(){let e=h();return r(()=>{let t=e.currentColors,n=e.layoutConfig.radius,r=e.currentMode===`dark`,i=k(r),a=j(n),o=A(t);return{algorithm:r?D.darkAlgorithm:D.defaultAlgorithm,token:{colorPrimary:O(t.primary),colorBgContainer:O(t.background),colorBgElevated:O(t.card),colorText:O(t.foreground),colorTextSecondary:O(t.mutedForeground),colorBorder:O(t.border),colorError:O(t.destructive),borderRadius:a.borderRadius,borderRadiusSM:a.borderRadiusSM,borderRadiusLG:a.borderRadiusLG,boxShadow:i.boxShadow,boxShadowSecondary:i.boxShadowSecondary,paddingSM:8,padding:12,paddingMD:16,paddingLG:20,paddingXL:24,fontSizeSM:12,fontSize:14,fontSizeLG:16,fontSizeXL:18},components:{...o,Table:{colorBgContainer:O(t.background),colorText:O(t.foreground),colorTextHeading:O(t.foreground),colorBorder:O(t.border),colorSplit:O(t.border),colorBgTextHover:O(t.muted),colorFillAlter:O(t.muted),colorFillContent:O(t.card),boxShadow:i.boxShadow,borderRadius:a.borderRadius},Pagination:{colorBgContainer:O(t.background),colorBgTextHover:O(t.muted),colorText:O(t.foreground),colorTextDisabled:O(t.mutedForeground),colorBorder:O(t.border),colorPrimary:O(t.primary),borderRadius:a.borderRadius}}}})}var P={class:`flex items-center gap-3`},F={key:2,class:`text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded-full`},I={class:`flex flex-col items-center justify-center py-8 text-muted-foreground`},L=i({name:`TTable`,__name:`TTable`,props:{schema:{},data:{default:()=>[]},loading:{type:Boolean,default:!1}},emits:[`update:data`,`change`,`selectChange`,`expand`,`update:expandedRowKeys`],setup(i,{expose:h,emit:D}){let O=i,k=D,{t:A,locale:j}=v(),L=N(),R=u(null);async function z(){let e=j.value;R.value=await x(e)}C(j,z,{immediate:!0});let B=g(),V=o(null),H=u({selectedRowKeys:[],selectedRows:[],expandedRowKeys:[],pagination:{current:1,pageSize:10,total:0}}),U=r({get:()=>O.data||[],set:e=>k(`update:data`,e)}),W=r(()=>typeof O.schema.rowKey==`function`?O.schema.rowKey:O.schema.rowKey||`id`);function G(e){if(typeof W.value==`function`)return W.value(e);if(typeof W.value==`string`){let t=e[W.value];if(t!==void 0)return t}return e.id===void 0?e.key===void 0?JSON.stringify(e):e.key:e.id}let{tableColumns:K,showActionColumn:q}=M({columns:r(()=>O.schema.columns||[]),actions:r(()=>O.schema.actions||[]),actionTitle:r(()=>O.schema.actionTitle),actionWidth:r(()=>O.schema.actionWidth||150),actionFixed:r(()=>O.schema.actionFixed||`right`)}),J=r(()=>{if(!O.schema.rowSelection||O.schema.rowSelection.show===!1)return;let e=O.schema.rowSelection;return{type:e.type||`checkbox`,selectedRowKeys:H.value.selectedRowKeys,columnWidth:e.columnWidth,columnTitle:e.columnTitle,fixed:e.fixed,hideSelectAll:e.hideSelectAll,selections:e.selections,getCheckboxProps:e.getCheckboxProps,preserveSelectedRowKeys:e.preserveSelectedRowKeys,checkStrictly:e.checkStrictly,onChange:(e,t)=>{H.value.selectedRowKeys=e,H.value.selectedRows=t,k(`selectChange`,e,t)}}}),Y=r(()=>{if(O.schema.pagination===!1)return!1;let e=O.schema.pagination||{};return{current:H.value.pagination.current,pageSize:H.value.pagination.pageSize,total:H.value.pagination.total,pageSizeOptions:e.pageSizeOptions||[`10`,`20`,`50`,`100`],showQuickJumper:e.showQuickJumper??!0,showSizeChanger:e.showSizeChanger??!0,showTotal:e.showTotal===!1?void 0:e=>A(`common.total`,{total:e}),simple:e.simple,...e}}),X=r(()=>{if(!O.schema.expandable)return;let e=O.schema.expandable;return{defaultExpandAllRows:e.defaultExpandAllRows,defaultExpandedRowKeys:e.defaultExpandedRowKeys,expandedRowKeys:H.value.expandedRowKeys,rowExpandable:e.rowExpandable,expandIconColumnIndex:e.expandIconColumnIndex,expandIcon:e.expandIcon,expandedRowRender:e.expandedRowRender||(B.expandedRow,void 0),onExpand:(e,t)=>{let n=G(t);e?H.value.expandedRowKeys=[...H.value.expandedRowKeys,n]:H.value.expandedRowKeys=H.value.expandedRowKeys.filter(e=>e!==n),k(`expand`,e,t),k(`update:expandedRowKeys`,H.value.expandedRowKeys)}}});function Z(e,t,n){H.value.pagination.current=e.current,H.value.pagination.pageSize=e.pageSize,k(`change`,e,t,{field:n.field,order:n.order,column:O.schema.columns.find(e=>e.dataIndex===n.field)})}return h({getSelectedRows:()=>H.value.selectedRows,getSelectedRowKeys:()=>H.value.selectedRowKeys,setSelectedRows:e=>{H.value.selectedRowKeys=e;let t=typeof W.value==`string`?W.value:`id`;H.value.selectedRows=U.value.filter(n=>e.includes(n[t]))},clearSelection:()=>{H.value.selectedRowKeys=[],H.value.selectedRows=[]},getTableInstance:()=>V.value??void 0,refresh:()=>{k(`change`,{...H.value.pagination},{},{field:``,order:void 0,column:void 0})},getPagination:()=>({...H.value.pagination}),setPagination:e=>{e.current!==void 0&&(H.value.pagination.current=e.current),e.pageSize!==void 0&&(H.value.pagination.pageSize=e.pageSize),e.total!==void 0&&(H.value.pagination.total=e.total)},expandRow:(e,t=!0)=>{let n=G(e),r=H.value.expandedRowKeys.indexOf(n);t&&r===-1?H.value.expandedRowKeys.push(n):!t&&r>-1&&H.value.expandedRowKeys.splice(r,1)},expandAllRows:()=>{H.value.expandedRowKeys=U.value.map(e=>G(e))},collapseAllRows:()=>{H.value.expandedRowKeys=[]}}),C(()=>O.data,e=>{if(e){let t=typeof W.value==`string`?W.value:`id`;H.value.selectedRows=e.filter(e=>H.value.selectedRowKeys.includes(e[t]))}},{deep:!0}),C(()=>{let e=O.schema.pagination;return typeof e==`object`?e.total:void 0},e=>{e!==void 0&&(H.value.pagination.total=e)},{immediate:!0}),C(()=>O.schema.rowSelection?.selectedRowKeys,e=>{if(e){H.value.selectedRowKeys=e;let t=typeof W.value==`string`?W.value:`id`;H.value.selectedRows=U.value.filter(n=>e.includes(n[t]))}},{immediate:!0}),C(()=>O.schema.expandable?.expandedRowKeys,e=>{e&&(H.value.expandedRowKeys=e)},{immediate:!0}),(r,o)=>{let u=E;return R.value?(b(),l(m(T),{key:0,theme:m(L),locale:R.value},{default:n(()=>[p(u,{ref_key:`tableRef`,ref:V,"data-source":U.value,columns:m(K),"row-key":W.value,loading:i.loading||i.schema.loading,size:i.schema.size||`middle`,bordered:i.schema.bordered,pagination:Y.value,"row-selection":J.value,scroll:i.schema.scroll,"show-header":i.schema.showHeader!==!1,"table-layout":i.schema.tableLayout,virtual:i.schema.virtual,sticky:i.schema.sticky,expandable:X.value,"children-column-name":i.schema.childrenColumnName||`children`,"indent-size":i.schema.indentSize??15,class:f(m(S)(`t-table`,r.$attrs.class)),onChange:Z},t({bodyCell:n(({column:t,text:n,record:a,index:o})=>[(b(!0),w(e,null,_(i.schema.columns,i=>(b(),w(e,{key:i.key||i.dataIndex},[(i.key||i.dataIndex)===t.key&&i.slot&&m(B)[i.slot]?y(r.$slots,i.slot,{key:0,text:n,record:a,index:o,column:i}):d(``,!0)],64))),128))]),headerCell:n(({column:t,text:n,index:a})=>[(b(!0),w(e,null,_(i.schema.columns,i=>(b(),w(e,{key:i.key||i.dataIndex},[(i.key||i.dataIndex)===t.key&&i.headerSlot&&m(B)[i.headerSlot]?y(r.$slots,i.headerSlot,{key:0,title:n,column:i,index:a}):d(``,!0)],64))),128))]),_:2},[i.schema.title||m(B).title||i.schema.showTotalBadge?{name:`title`,fn:n(()=>[y(r.$slots,`title`,{data:U.value},()=>[s(`div`,P,[typeof i.schema.title==`function`?(b(),w(e,{key:0},[a(c(i.schema.title(U.value)),1)],64)):(b(),w(e,{key:1},[a(c(i.schema.title),1)],64)),i.schema.showTotalBadge?(b(),w(`span`,F,c(m(A)(`common.total`,{total:U.value.length})),1)):d(``,!0)])])]),key:`0`}:void 0,i.schema.footer||m(B).footer?{name:`footer`,fn:n(()=>[y(r.$slots,`footer`,{data:U.value},()=>[typeof i.schema.footer==`function`?(b(),w(e,{key:0},[a(c(i.schema.footer(U.value)),1)],64)):(b(),w(e,{key:1},[a(c(i.schema.footer),1)],64))])]),key:`1`}:void 0,i.schema.summary?.slot||m(B).summary||i.schema.summary?.render?{name:`summary`,fn:n(()=>[y(r.$slots,`summary`,{data:U.value},()=>[i.schema.summary?.render?(b(),w(e,{key:0},[a(c(i.schema.summary.render(U.value)),1)],64)):d(``,!0)])]),key:`2`}:void 0,i.schema.emptySlot||m(B).emptyText?{name:`emptyText`,fn:n(()=>[y(r.$slots,`emptyText`,{},()=>[s(`div`,I,[o[0]||=s(`svg`,{class:`w-12 h-12 mb-4 text-muted-foreground/50`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[s(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`1.5`,d:`M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z`})],-1),s(`p`,null,c(i.schema.emptyText||m(A)(`common.noData`)),1)])])]),key:`3`}:void 0,i.schema.expandable?.expandedRowSlot||m(B).expandedRow?{name:`expandedRowRender`,fn:n(({record:e,index:t,indent:n,expanded:i})=>[y(r.$slots,`expandedRow`,{record:e,index:t,indent:n,expanded:i})]),key:`4`}:void 0,m(B).expandIcon?{name:`expandIcon`,fn:n(({expanded:e,onExpand:t,record:n,expandable:i})=>[y(r.$slots,`expandIcon`,{expanded:e,onExpand:t,record:n,expandable:i})]),key:`5`}:void 0]),1032,[`data-source`,`columns`,`row-key`,`loading`,`size`,`bordered`,`pagination`,`row-selection`,`scroll`,`show-header`,`table-layout`,`virtual`,`sticky`,`expandable`,`children-column-name`,`indent-size`,`class`])]),_:3},8,[`theme`,`locale`])):d(``,!0)}}});export{L as t};