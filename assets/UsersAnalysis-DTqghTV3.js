import"./ScrollArea-DFVXjTz0.js";import"./Presence-3Lrzvetv.js";import{Ai as e,Ca as t,Fi as n,Gi as r,Hi as i,Ii as a,Ka as o,Kn as s,Li as c,Na as l,Ua as u,Ui as d,Va as f,an as p,ca as m,d as h,fa as g,l as _,oa as v,p as y,ra as b,zi as x}from"./index-D6Cod0pL.js";import"./_plugin-vue_export-helper-Dey4FfNi.js";import"./badge-O2q4qI2Q.js";import{n as S,t as C}from"./CardContent-CMuL0LxG.js";import{n as w,t as T}from"./CardTitle-D06OZslX.js";import{a as E}from"./bento-CoJO8vPE.js";var D={class:`space-y-6`},O={class:`flex flex-wrap gap-3`},k={class:`flex items-baseline gap-2`},A={class:`text-lg font-semibold`},j={class:`text-xs text-muted-foreground`},M={class:`text-xs text-green-500`},N={class:`grid grid-cols-1 lg:grid-cols-2 gap-6`},P={class:`h-[300px] overflow-auto`},F={key:0,class:`space-y-4`},I={class:`font-medium`},L={class:`text-2xl font-bold mt-1`},R={class:`text-right`},z={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},B={class:`text-center`},V={class:`h-[300px] flex flex-col justify-center`},H={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},U={class:`text-center`},W=r({__name:`UsersAnalysis`,setup(r){let W=l({totalUsers:0,newUsers:0,activeUsers:0,retentionRate:`0%`,growth:0}),G=l([]),K=n(()=>[{title:`总用户数`,value:W.value.totalUsers.toLocaleString(),icon:_,color:`text-blue-500`,trend:`+15.2%`},{title:`新增用户`,value:W.value.newUsers.toLocaleString(),icon:h,color:`text-green-500`,trend:`+22.1%`},{title:`活跃用户`,value:W.value.activeUsers.toLocaleString(),icon:y,color:`text-purple-500`,trend:`+8.7%`},{title:`留存率`,value:W.value.retentionRate,icon:p,color:`text-orange-500`,trend:`+3.2%`}]),q=async()=>{try{let[e,t]=await Promise.all([s.getCoreMetrics(`7d`),s.getUserBehavior()]);W.value={totalUsers:e.newUsers*5,newUsers:e.newUsers,activeUsers:Math.round(e.newUsers*2.5),retentionRate:`68.5%`,growth:e.newUsersChange},G.value=t}catch(e){console.error(`获取用户数据失败:`,e)}};return b(()=>{q()}),(n,r)=>(v(),x(`div`,D,[r[5]||=a(`div`,{class:`flex flex-col sm:flex-row sm:items-center justify-between gap-4`},[a(`div`,null,[a(`h1`,{class:`text-3xl font-bold tracking-tight`},`用户分析`),a(`p`,{class:`text-muted-foreground mt-1.5 text-sm`},`分析用户增长和活跃度`)])],-1),a(`div`,O,[(v(!0),x(e,null,m(f(K),e=>(v(),x(`div`,{key:e.title,class:`flex items-center gap-3 px-4 py-2.5 bg-muted/50 rounded-lg hover:bg-muted/70 transition-colors`},[(v(),c(g(e.icon),{class:u([`h-4 w-4`,e.color])},null,8,[`class`])),a(`div`,k,[a(`span`,A,o(e.value),1),a(`span`,j,o(e.title),1),a(`span`,M,o(e.trend),1)])]))),128))]),a(`div`,N,[d(f(S),{class:`bg-muted/40 border border-border/50 rounded-xl`},{default:t(()=>[d(f(w),null,{default:t(()=>[d(f(T),{class:`text-base`},{default:t(()=>[...r[0]||=[i(`用户行为数据`,-1)]]),_:1})]),_:1}),d(f(C),null,{default:t(()=>[a(`div`,P,[f(G).length>0?(v(),x(`div`,F,[(v(!0),x(e,null,m(f(G),e=>(v(),x(`div`,{key:e.label,class:`flex items-center justify-between p-3 bg-muted/50 rounded-lg`},[a(`div`,null,[a(`p`,I,o(e.label),1),a(`p`,L,o(e.value),1)]),a(`div`,R,[a(`p`,{class:u([`text-xs`,e.isPositive?`text-green-500`:`text-red-500`])},o(e.isPositive?`↑`:`↓`)+` `+o(e.change)+`% `,3)])]))),128))])):(v(),x(`div`,z,[a(`div`,B,[d(f(_),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),r[1]||=a(`p`,null,`加载中...`,-1)])]))])]),_:1})]),_:1}),d(f(S),{class:`bg-muted/40 border border-border/50 rounded-xl`},{default:t(()=>[d(f(w),null,{default:t(()=>[d(f(T),{class:`text-base`},{default:t(()=>[...r[2]||=[i(`用户增长趋势`,-1)]]),_:1})]),_:1}),d(f(C),null,{default:t(()=>[a(`div`,V,[f(W).totalUsers>0?(v(),c(f(E),{key:0,type:`line`,data:[f(W).totalUsers*.8,f(W).totalUsers*.85,f(W).totalUsers*.9,f(W).totalUsers*.95,f(W).totalUsers],color:`bg-purple-500`,height:200},null,8,[`data`])):(v(),x(`div`,H,[a(`div`,U,[d(f(p),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),r[3]||=a(`p`,null,`加载中...`,-1)])])),r[4]||=a(`div`,{class:`mt-4 flex justify-between text-xs text-muted-foreground`},[a(`span`,null,`周一`),a(`span`,null,`周二`),a(`span`,null,`周三`),a(`span`,null,`周四`),a(`span`,null,`周五`)],-1)])]),_:1})]),_:1})])]))}});export{W as default};