import{Ai as e,Ca as t,Dt as n,Fi as r,Ga as i,Gi as a,Hi as o,Ii as s,J as c,Ka as l,Kn as u,Li as d,M as f,Na as p,Ua as m,Ui as h,Va as g,ca as _,fa as ee,oa as v,ra as y,v as b,zi as x}from"./index-D6Cod0pL.js";import{n as S,t as C}from"./CardContent-CMuL0LxG.js";import{n as w,t as T}from"./CardTitle-D06OZslX.js";var E={class:`space-y-6`},D={class:`flex flex-wrap gap-3`},O={class:`flex items-baseline gap-2`},k={class:`text-lg font-semibold`},A={class:`text-xs text-muted-foreground`},j={class:`text-xs text-green-500`},M={class:`grid grid-cols-1 lg:grid-cols-2 gap-6`},N={class:`h-[300px] overflow-auto`},P={key:0,class:`space-y-3`},F={class:`w-6 h-6 flex items-center justify-center bg-primary text-primary-foreground text-xs font-bold rounded`},I={class:`flex-1`},L={class:`font-medium`},R={class:`text-xs text-muted-foreground`},z={class:`text-right`},B={class:`font-semibold`},V={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},H={class:`text-center`},U={class:`h-[300px] overflow-auto`},W={key:0,class:`space-y-4`},G={class:`flex justify-between text-sm`},K={class:`font-medium`},q={class:`h-2 bg-muted rounded-full overflow-hidden`},J={class:`text-xs text-muted-foreground`},Y={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},X={class:`text-center`},Z=a({__name:`Sales`,setup(a){let Z=p({totalSales:0,totalOrders:0,avgOrderValue:0,conversionRate:`0%`,growth:0}),Q=p([]),$=p([]),te=r(()=>[{title:`总销售额`,value:`¥`+Z.value.totalSales.toLocaleString(),icon:n,color:`text-green-500`,trend:`+18.5%`},{title:`订单数量`,value:Z.value.totalOrders.toLocaleString(),icon:f,color:`text-blue-500`,trend:`+12.3%`},{title:`客单价`,value:`¥`+Z.value.avgOrderValue,icon:c,color:`text-purple-500`,trend:`+5.2%`},{title:`转化率`,value:Z.value.conversionRate,icon:b,color:`text-orange-500`,trend:`+0.8%`}]),ne=async()=>{try{let[e,t,n]=await Promise.all([u.getCoreMetrics(`7d`),u.getTopProducts(5),u.getCategoryShares()]);Z.value={totalSales:Math.round(e.avgOrderValue*e.totalVisits*e.conversionRate/100),totalOrders:Math.round(e.totalVisits*e.conversionRate/100),avgOrderValue:e.avgOrderValue,conversionRate:e.conversionRate.toFixed(2)+`%`,growth:e.avgOrderValueChange},Q.value=t,$.value=n}catch(e){console.error(`获取销售数据失败:`,e)}};return y(()=>{ne()}),(n,r)=>(v(),x(`div`,E,[r[4]||=s(`div`,{class:`flex flex-col sm:flex-row sm:items-center justify-between gap-4`},[s(`div`,null,[s(`h1`,{class:`text-3xl font-bold tracking-tight`},`销售分析`),s(`p`,{class:`text-muted-foreground mt-1.5 text-sm`},`分析销售数据和订单趋势`)])],-1),s(`div`,D,[(v(!0),x(e,null,_(g(te),e=>(v(),x(`div`,{key:e.title,class:`flex items-center gap-3 px-4 py-2.5 bg-muted/50 rounded-lg hover:bg-muted/70 transition-colors`},[(v(),d(ee(e.icon),{class:m([`h-4 w-4`,e.color])},null,8,[`class`])),s(`div`,O,[s(`span`,k,l(e.value),1),s(`span`,A,l(e.title),1),s(`span`,j,l(e.trend),1)])]))),128))]),s(`div`,M,[h(g(S),{class:`bg-muted/40 border border-border/50 rounded-xl`},{default:t(()=>[h(g(w),null,{default:t(()=>[h(g(T),{class:`text-base`},{default:t(()=>[...r[0]||=[o(`热销商品`,-1)]]),_:1})]),_:1}),h(g(C),null,{default:t(()=>[s(`div`,N,[g(Q).length>0?(v(),x(`div`,P,[(v(!0),x(e,null,_(g(Q),(e,t)=>(v(),x(`div`,{key:e.id,class:`flex items-center gap-3 p-3 bg-muted/50 rounded-lg`},[s(`span`,F,l(t+1),1),s(`div`,I,[s(`p`,L,l(e.name),1),s(`p`,R,`销量: `+l(e.sales),1)]),s(`div`,z,[s(`p`,B,`¥`+l(e.revenue.toLocaleString()),1),s(`p`,{class:m([`text-xs`,e.trend>0?`text-green-500`:`text-red-500`])},l(e.trend>0?`+`:``)+l(e.trend)+`% `,3)])]))),128))])):(v(),x(`div`,V,[s(`div`,H,[h(g(b),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),r[1]||=s(`p`,null,`加载中...`,-1)])]))])]),_:1})]),_:1}),h(g(S),{class:`bg-muted/40 border border-border/50 rounded-xl`},{default:t(()=>[h(g(w),null,{default:t(()=>[h(g(T),{class:`text-base`},{default:t(()=>[...r[2]||=[o(`品类销售占比`,-1)]]),_:1})]),_:1}),h(g(C),null,{default:t(()=>[s(`div`,U,[g($).length>0?(v(),x(`div`,W,[(v(!0),x(e,null,_(g($),e=>(v(),x(`div`,{key:e.name,class:`space-y-2`},[s(`div`,G,[s(`span`,null,l(e.name),1),s(`span`,K,l(e.percentage)+`%`,1)]),s(`div`,q,[s(`div`,{class:m([e.color,`h-full rounded-full transition-all duration-500`]),style:i({width:e.percentage+`%`})},null,6)]),s(`p`,J,`¥`+l(e.amount.toLocaleString()),1)]))),128))])):(v(),x(`div`,Y,[s(`div`,X,[h(g(c),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),r[3]||=s(`p`,null,`加载中...`,-1)])]))])]),_:1})]),_:1})])]))}});export{Z as default};