import{i as e,r as t}from"./Presence-3Lrzvetv.js";import{Bn as n,Ca as r,Cn as i,Fi as a,Gi as o,Ha as s,Ji as c,Ki as l,Li as u,Na as d,Ra as f,Ui as p,Va as m,Yi as h,ba as g,bi as _,ea as v,ha as y,ia as b,ka as x,la as S,ln as C,mn as w,oa as T,qa as E,ra as D,sa as O,un as k,ya as A,za as j}from"./index-D6Cod0pL.js";function M(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function N(e){let t=l(),n=t?.type.emits,r={};return n?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),n?.forEach(t=>{r[E(s(t))]=(...n)=>e(t,...n)}),r}function P(e){let t=l(),n=Object.keys(t?.type.props??{}).reduce((e,n)=>{let r=(t?.type.props[n]).default;return r!==void 0&&(e[n]=r),e},{}),r=f(e);return a(()=>{let e={},i=t?.vnode.props??{};return Object.keys(i).forEach(t=>{e[s(t)]=i[t]}),Object.keys({...n,...e}).reduce((e,t)=>(r.value[t]!==void 0&&(e[t]=r.value[t]),e),{})})}function F(e,t){let n=P(e),r=t?N(t):{};return a(()=>({...n.value,...r}))}var I=0;function L(t,n=`reka`){if(t)return t;if(`useId`in _)return`${n}-${y?.()}`;let r=e({useId:void 0});return r.useId?`${n}-${r.useId()}`:`${n}-${++I}`}function R(){let e=d();return{primitiveElement:e,currentElement:a(()=>[`#text`,`#comment`].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:w(e))}}var z=`data-reka-collection-item`;function B(e={}){let{key:t=``,isProvider:n=!1}=e,r=`${t}CollectionProvider`,i;if(n){let e=d(new Map);i={collectionRef:d(),itemMap:e},O(r,i)}else i=h(r);let s=(e=!1)=>{let t=i.collectionRef.value;if(!t)return[];let n=Array.from(t.querySelectorAll(`[${z}]`)),r=Array.from(i.itemMap.value.values()).sort((e,t)=>n.indexOf(e.ref)-n.indexOf(t.ref));return e?r:r.filter(e=>e.ref.dataset.disabled!==``)},l=o({name:`CollectionSlot`,inheritAttrs:!1,setup(e,{slots:t,attrs:n}){let{primitiveElement:r,currentElement:a}=R();return A(a,()=>{i.collectionRef.value=a.value}),()=>c(k,{ref:r,...n},t)}}),u=o({name:`CollectionItem`,inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(e,{slots:t,attrs:n}){let{primitiveElement:r,currentElement:a}=R();return g(t=>{if(a.value){let n=x(a.value);i.itemMap.value.set(n,{ref:a.value,value:e.value}),t(()=>i.itemMap.value.delete(n))}}),()=>c(k,{...n,[z]:``,ref:r},t)}});return{getItems:s,reactiveItems:a(()=>Array.from(i.itemMap.value.values())),itemMapSize:a(()=>i.itemMap.value.size),CollectionSlot:l,CollectionItem:u}}var V=`rovingFocusGroup.onEntryFocus`,H={bubbles:!1,cancelable:!0},U={ArrowLeft:`prev`,ArrowUp:`prev`,ArrowRight:`next`,ArrowDown:`next`,PageUp:`first`,Home:`first`,PageDown:`last`,End:`last`};function W(e,t){return t===`rtl`?e===`ArrowLeft`?`ArrowRight`:e===`ArrowRight`?`ArrowLeft`:e:e}function G(e,t,n){let r=W(e.key,n);if(!(t===`vertical`&&[`ArrowLeft`,`ArrowRight`].includes(r))&&!(t===`horizontal`&&[`ArrowUp`,`ArrowDown`].includes(r)))return U[r]}function K(e,t=!1){let n=M();for(let r of e)if(r===n||(r.focus({preventScroll:t}),M()!==n))return}function q(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var[J,Y]=n(`RovingFocusGroup`),X=o({__name:`RovingFocusGroup`,props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:[`entryFocus`,`update:currentTabStopId`],setup(e,{expose:n,emit:a}){let o=e,s=a,{loop:c,orientation:l,dir:f}=j(o),h=t(f),g=i(o,`currentTabStopId`,s,{defaultValue:o.defaultCurrentTabStopId,passive:o.currentTabStopId===void 0}),_=d(!1),v=d(!1),y=d(0),{getItems:b,CollectionSlot:x}=B({isProvider:!0});function w(e){let t=!v.value;if(e.currentTarget&&e.target===e.currentTarget&&t&&!_.value){let t=new CustomEvent(V,H);if(e.currentTarget.dispatchEvent(t),s(`entryFocus`,t),!t.defaultPrevented){let e=b().map(e=>e.ref).filter(e=>e.dataset.disabled!==``);K([e.find(e=>e.getAttribute(`data-active`)===``),e.find(e=>e.getAttribute(`data-highlighted`)===``),e.find(e=>e.id===g.value),...e].filter(Boolean),o.preventScrollOnEntryFocus)}}v.value=!1}function E(){setTimeout(()=>{v.value=!1},1)}return n({getItems:b}),Y({loop:c,dir:h,orientation:l,currentTabStopId:g,onItemFocus:e=>{g.value=e},onItemShiftTab:()=>{_.value=!0},onFocusableItemAdd:()=>{y.value++},onFocusableItemRemove:()=>{y.value--}}),(e,t)=>(T(),u(m(x),null,{default:r(()=>[p(m(C),{tabindex:_.value||y.value===0?-1:0,"data-orientation":m(l),as:e.as,"as-child":e.asChild,dir:m(h),style:{outline:`none`},onMousedown:t[0]||=e=>v.value=!0,onMouseup:E,onFocus:w,onBlur:t[1]||=e=>_.value=!1},{default:r(()=>[S(e.$slots,`default`)]),_:3},8,[`tabindex`,`data-orientation`,`as`,`as-child`,`dir`])]),_:3}))}}),Z=o({__name:`RovingFocusItem`,props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=e,n=J(),i=L(),o=a(()=>t.tabStopId||i),s=a(()=>n.currentTabStopId.value===o.value),{getItems:c,CollectionItem:l}=B();D(()=>{t.focusable&&n.onFocusableItemAdd()}),b(()=>{t.focusable&&n.onFocusableItemRemove()});function d(e){if(e.key===`Tab`&&e.shiftKey){n.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let r=G(e,n.orientation.value,n.dir.value);if(r!==void 0){if(e.metaKey||e.ctrlKey||e.altKey||!t.allowShiftKey&&e.shiftKey)return;e.preventDefault();let i=[...c().map(e=>e.ref).filter(e=>e.dataset.disabled!==``)];if(r===`last`)i.reverse();else if(r===`prev`||r===`next`){r===`prev`&&i.reverse();let t=i.indexOf(e.currentTarget);i=n.loop.value?q(i,t+1):i.slice(t+1)}v(()=>K(i))}}return(e,t)=>(T(),u(m(l),null,{default:r(()=>[p(m(C),{tabindex:s.value?0:-1,"data-orientation":m(n).orientation.value,"data-active":e.active?``:void 0,"data-disabled":e.focusable?void 0:``,as:e.as,"as-child":e.asChild,onMousedown:t[0]||=t=>{e.focusable?m(n).onItemFocus(o.value):t.preventDefault()},onFocus:t[1]||=e=>m(n).onItemFocus(o.value),onKeydown:d},{default:r(()=>[S(e.$slots,`default`)]),_:3},8,[`tabindex`,`data-orientation`,`data-active`,`data-disabled`,`as`,`as-child`])]),_:3}))}});export{R as a,P as c,B as i,N as l,X as n,L as o,G as r,F as s,Z as t,M as u};