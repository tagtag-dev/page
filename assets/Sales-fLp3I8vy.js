import{Bi as e,Dt as t,Ha as n,Ii as r,J as i,Ka as a,Ki as o,Li as s,M as ee,Pa as c,Ri as l,Ui as u,Wa as d,Wi as f,ia as p,ji as m,la as h,pa as g,qa as _,qn as v,sa as y,v as b,wa as x}from"./index-DX59uxwP.js";import{n as S,t as C}from"./CardContent-DuACdMkv.js";import{n as w,t as T}from"./CardTitle-Bo9EKq0R.js";var E={class:`space-y-6`},D={class:`flex flex-wrap gap-3`},O={class:`flex items-baseline gap-2`},k={class:`text-lg font-semibold`},A={class:`text-xs text-muted-foreground`},j={class:`text-xs text-green-500`},M={class:`grid grid-cols-1 lg:grid-cols-2 gap-6`},N={class:`h-[300px] overflow-auto`},P={key:0,class:`space-y-3`},F={class:`w-6 h-6 flex items-center justify-center bg-primary text-primary-foreground text-xs font-bold rounded`},I={class:`flex-1`},L={class:`font-medium`},R={class:`text-xs text-muted-foreground`},z={class:`text-right`},B={class:`font-semibold`},V={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},H={class:`text-center`},U={class:`h-[300px] overflow-auto`},W={key:0,class:`space-y-4`},G={class:`flex justify-between text-sm`},K={class:`font-medium`},q={class:`h-2 bg-muted rounded-full overflow-hidden`},J={class:`text-xs text-muted-foreground`},Y={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},X={class:`text-center`},Z=o({__name:`Sales`,setup(o){let Z=c({totalSales:0,totalOrders:0,avgOrderValue:0,conversionRate:`0%`,growth:0}),Q=c([]),$=c([]),te=r(()=>[{title:`总销售额`,value:`¥`+Z.value.totalSales.toLocaleString(),icon:t,color:`text-green-500`,trend:`+18.5%`},{title:`订单数量`,value:Z.value.totalOrders.toLocaleString(),icon:ee,color:`text-blue-500`,trend:`+12.3%`},{title:`客单价`,value:`¥`+Z.value.avgOrderValue,icon:i,color:`text-purple-500`,trend:`+5.2%`},{title:`转化率`,value:Z.value.conversionRate,icon:b,color:`text-orange-500`,trend:`+0.8%`}]),ne=async()=>{try{let[e,t,n]=await Promise.all([v.getCoreMetrics(`7d`),v.getTopProducts(5),v.getCategoryShares()]);Z.value={totalSales:Math.round(e.avgOrderValue*e.totalVisits*e.conversionRate/100),totalOrders:Math.round(e.totalVisits*e.conversionRate/100),avgOrderValue:e.avgOrderValue,conversionRate:e.conversionRate.toFixed(2)+`%`,growth:e.avgOrderValueChange},Q.value=t,$.value=n}catch(e){console.error(`获取销售数据失败:`,e)}};return p(()=>{ne()}),(t,r)=>(y(),e(`div`,E,[r[4]||=s(`div`,{class:`flex flex-col sm:flex-row sm:items-center justify-between gap-4`},[s(`div`,null,[s(`h1`,{class:`text-3xl font-bold tracking-tight`},`销售分析`),s(`p`,{class:`text-muted-foreground mt-1.5 text-sm`},`分析销售数据和订单趋势`)])],-1),s(`div`,D,[(y(!0),e(m,null,h(n(te),t=>(y(),e(`div`,{key:t.title,class:`flex items-center gap-3 px-4 py-2.5 bg-muted/50 rounded-lg hover:bg-muted/70 transition-colors`},[(y(),l(g(t.icon),{class:d([`h-4 w-4`,t.color])},null,8,[`class`])),s(`div`,O,[s(`span`,k,_(t.value),1),s(`span`,A,_(t.title),1),s(`span`,j,_(t.trend),1)])]))),128))]),s(`div`,M,[f(n(S),{class:`bg-muted/40 border border-border/50 rounded-xl`},{default:x(()=>[f(n(w),null,{default:x(()=>[f(n(T),{class:`text-base`},{default:x(()=>[...r[0]||=[u(`热销商品`,-1)]]),_:1})]),_:1}),f(n(C),null,{default:x(()=>[s(`div`,N,[n(Q).length>0?(y(),e(`div`,P,[(y(!0),e(m,null,h(n(Q),(t,n)=>(y(),e(`div`,{key:t.id,class:`flex items-center gap-3 p-3 bg-muted/50 rounded-lg`},[s(`span`,F,_(n+1),1),s(`div`,I,[s(`p`,L,_(t.name),1),s(`p`,R,`销量: `+_(t.sales),1)]),s(`div`,z,[s(`p`,B,`¥`+_(t.revenue.toLocaleString()),1),s(`p`,{class:d([`text-xs`,t.trend>0?`text-green-500`:`text-red-500`])},_(t.trend>0?`+`:``)+_(t.trend)+`% `,3)])]))),128))])):(y(),e(`div`,V,[s(`div`,H,[f(n(b),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),r[1]||=s(`p`,null,`加载中...`,-1)])]))])]),_:1})]),_:1}),f(n(S),{class:`bg-muted/40 border border-border/50 rounded-xl`},{default:x(()=>[f(n(w),null,{default:x(()=>[f(n(T),{class:`text-base`},{default:x(()=>[...r[2]||=[u(`品类销售占比`,-1)]]),_:1})]),_:1}),f(n(C),null,{default:x(()=>[s(`div`,U,[n($).length>0?(y(),e(`div`,W,[(y(!0),e(m,null,h(n($),t=>(y(),e(`div`,{key:t.name,class:`space-y-2`},[s(`div`,G,[s(`span`,null,_(t.name),1),s(`span`,K,_(t.percentage)+`%`,1)]),s(`div`,q,[s(`div`,{class:d([t.color,`h-full rounded-full transition-all duration-500`]),style:a({width:t.percentage+`%`})},null,6)]),s(`p`,J,`¥`+_(t.amount.toLocaleString()),1)]))),128))])):(y(),e(`div`,Y,[s(`div`,X,[f(n(i),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),r[3]||=s(`p`,null,`加载中...`,-1)])]))])]),_:1})]),_:1})])]))}});export{Z as default};