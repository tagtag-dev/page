import"./ScrollArea-CW0-18Hy.js";import"./button-Bo4o88Eb.js";import"./Presence-CX2vXdhf.js";import{Bi as e,Di as t,Ea as n,Gi as r,Ti as i,Ui as a,Wt as o,Yi as s,_i as c,a as l,fi as u,ga as d,ka as f,kn as p,l as m,oa as h,s as g,vi as _,wa as v,wi as y,xi as b,yi as x}from"./index-D9LA8apy.js";import"./badge-DoBLqkFL.js";import{n as S,t as C}from"./CardContent-bGWyUVF7.js";import{n as w,t as T}from"./CardTitle-9YsRePqj.js";import{a as E}from"./bento-CMxr9-Yq.js";var D={class:`space-y-6`},O={class:`flex flex-wrap gap-3`},k={class:`flex items-baseline gap-2`},A={class:`text-lg font-semibold`},j={class:`text-xs text-muted-foreground`},M={class:`text-xs text-green-500`},N={class:`grid grid-cols-1 lg:grid-cols-2 gap-6`},P={class:`h-[300px] overflow-auto`},F={key:0,class:`space-y-4`},I={class:`font-medium`},L={class:`text-2xl font-bold mt-1`},R={class:`text-right`},z={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},B={class:`text-center`},V={class:`h-[300px] flex flex-col justify-center`},H={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},U={class:`text-center`},W=t({__name:`UsersAnalysis`,setup(t){let W=d({totalUsers:0,newUsers:0,activeUsers:0,retentionRate:`0%`,growth:0}),G=d([]),K=c(()=>[{title:`总用户数`,value:W.value.totalUsers.toLocaleString(),icon:l,color:`text-blue-500`,trend:`+15.2%`},{title:`新增用户`,value:W.value.newUsers.toLocaleString(),icon:g,color:`text-green-500`,trend:`+22.1%`},{title:`活跃用户`,value:W.value.activeUsers.toLocaleString(),icon:m,color:`text-purple-500`,trend:`+8.7%`},{title:`留存率`,value:W.value.retentionRate,icon:o,color:`text-orange-500`,trend:`+3.2%`}]),q=async()=>{try{let[e,t]=await Promise.all([p.getCoreMetrics(`7d`),p.getUserBehavior()]);W.value={totalUsers:e.newUsers*5,newUsers:e.newUsers,activeUsers:Math.round(e.newUsers*2.5),retentionRate:`68.5%`,growth:e.newUsersChange},G.value=t}catch(e){console.error(`获取用户数据失败:`,e)}};return e(()=>{q()}),(e,t)=>(a(),b(`div`,D,[t[5]||=_(`div`,{class:`flex flex-col sm:flex-row sm:items-center justify-between gap-4`},[_(`div`,null,[_(`h1`,{class:`text-3xl font-bold tracking-tight`},`用户分析`),_(`p`,{class:`text-muted-foreground mt-1.5 text-sm`},`分析用户增长和活跃度`)])],-1),_(`div`,O,[(a(!0),b(u,null,r(v(K),e=>(a(),b(`div`,{key:e.title,class:`flex items-center gap-3 px-4 py-2.5 bg-muted/50 rounded-lg hover:bg-muted/70 transition-colors`},[(a(),x(s(e.icon),{class:n([`h-4 w-4`,e.color])},null,8,[`class`])),_(`div`,k,[_(`span`,A,f(e.value),1),_(`span`,j,f(e.title),1),_(`span`,M,f(e.trend),1)])]))),128))]),_(`div`,N,[i(v(S),{class:`border-0 shadow-sm`},{default:h(()=>[i(v(w),null,{default:h(()=>[i(v(T),{class:`text-base`},{default:h(()=>[...t[0]||=[y(`用户行为数据`,-1)]]),_:1})]),_:1}),i(v(C),null,{default:h(()=>[_(`div`,P,[v(G).length>0?(a(),b(`div`,F,[(a(!0),b(u,null,r(v(G),e=>(a(),b(`div`,{key:e.label,class:`flex items-center justify-between p-3 bg-muted/50 rounded-lg`},[_(`div`,null,[_(`p`,I,f(e.label),1),_(`p`,L,f(e.value),1)]),_(`div`,R,[_(`p`,{class:n([`text-xs`,e.isPositive?`text-green-500`:`text-red-500`])},f(e.isPositive?`↑`:`↓`)+` `+f(e.change)+`% `,3)])]))),128))])):(a(),b(`div`,z,[_(`div`,B,[i(v(l),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),t[1]||=_(`p`,null,`加载中...`,-1)])]))])]),_:1})]),_:1}),i(v(S),{class:`border-0 shadow-sm`},{default:h(()=>[i(v(w),null,{default:h(()=>[i(v(T),{class:`text-base`},{default:h(()=>[...t[2]||=[y(`用户增长趋势`,-1)]]),_:1})]),_:1}),i(v(C),null,{default:h(()=>[_(`div`,V,[v(W).totalUsers>0?(a(),x(v(E),{key:0,type:`line`,data:[v(W).totalUsers*.8,v(W).totalUsers*.85,v(W).totalUsers*.9,v(W).totalUsers*.95,v(W).totalUsers],color:`bg-purple-500`,height:200},null,8,[`data`])):(a(),b(`div`,H,[_(`div`,U,[i(v(o),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),t[3]||=_(`p`,null,`加载中...`,-1)])])),t[4]||=_(`div`,{class:`mt-4 flex justify-between text-xs text-muted-foreground`},[_(`span`,null,`周一`),_(`span`,null,`周二`),_(`span`,null,`周三`),_(`span`,null,`周四`),_(`span`,null,`周五`)],-1)])]),_:1})]),_:1})])]))}});export{W as default};