import{Dn as e,En as t,Ii as n,Pa as r,Un as i,Va as a,ba as o,br as s,i as c,or as l,ta as u,xr as d}from"./index-DX59uxwP.js";function f(e){return e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase()).replace(/^[a-z]/,e=>e.toUpperCase())}function p(e){if(e)return c[f(e)]}function m(e){return n(()=>p(a(e)))}function h(a){let{scrollContainerRef:c,tabsContainerRef:f}=a,p=s(),m=d(),h=i(),g=l(),_=r(!1),v=r(!0),y=r(!0),{x:b}=e(f,{behavior:`smooth`}),x=()=>{u(()=>{let e=c.value,t=f.value;if(!e||!t){_.value=!1,v.value=!0,y.value=!0;return}_.value=t.scrollWidth>e.clientWidth;let n=t.scrollWidth-e.clientWidth,r=t.scrollLeft;v.value=r<=0,y.value=r>=n-1})};t(c,x),t(f,x),o(()=>h.tabs.length,x,{immediate:!0}),o(b,()=>{x()});let S=n(()=>_.value&&!v.value),C=n(()=>_.value&&!y.value),w=n(()=>{if(!_.value)return 0;let e=c.value,t=f.value;if(!e||!t)return 0;let n=t.scrollWidth-e.clientWidth;return n<=0?0:b.value/n*100}),T=e=>{u(()=>{let t=f.value?.querySelector(`[data-tab-path="${e}"]`);if(t&&f.value&&c.value){let e=c.value.getBoundingClientRect(),n=t.getBoundingClientRect(),r=f.value.scrollLeft,i=n.left+n.width/2-e.left,a=e.width/2,o=r+i-a;f.value.scrollTo({left:o,behavior:`smooth`})}})},E=()=>{f.value?.scrollBy({left:-200,behavior:`smooth`})},D=()=>{f.value?.scrollBy({left:200,behavior:`smooth`})},O=()=>{f.value?.scrollTo({left:0,behavior:`smooth`})},k=()=>{f.value&&f.value.scrollTo({left:f.value.scrollWidth,behavior:`smooth`})},A=e=>{h.activateTab(e),m.push(e)},j=e=>{h.removeTab(e)},M=e=>{h.refreshTab(e),window.dispatchEvent(new CustomEvent(`tab-refresh`,{detail:{path:e}}))},N=e=>{h.closeOtherTabs(e)},P=e=>{h.closeLeftTabs(e)},F=e=>{h.closeRightTabs(e)},I=()=>{h.closeAllTabs();let e=h.tabs.find(e=>e.affix);e&&m.push(e.path)},L=r(null);return o([()=>p.path,()=>g.isLoaded],([e,t])=>{if(!e||!t)return;let n=h.tabs.find(t=>t.path===e);if(n){let t=g.getRouteTitle(e),r=g.flatMenus.find(t=>t.path===e);t&&t!==n.title&&(n.title=t),r?.icon&&!n.icon&&(n.icon=r.icon),h.activateTab(e),T(e);return}let r=g.getRouteTitle(e),i=g.flatMenus.find(t=>t.path===e);h.addTab({path:e,title:r,icon:i?.icon,affix:e===`/dashboard`}),T(e)},{immediate:!0}),{isOverflowing:_,canScrollLeft:S,canScrollRight:C,scrollProgress:w,scrollToTab:T,scrollLeft:E,scrollRight:D,scrollToStart:O,scrollToEnd:k,handleTabClick:A,handleCloseTab:j,handleRefreshTab:M,handleCloseOthers:N,handleCloseLeft:P,handleCloseRight:F,handleCloseAll:I,handleDragStart:(e,t)=>{L.value=t,e.dataTransfer&&(e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t))},handleDragOver:(e,t)=>{if(e.preventDefault(),!L.value||L.value===t)return;let n=h.tabs.findIndex(e=>e.path===L.value),r=h.tabs.findIndex(e=>e.path===t);if(n!==-1&&r!==-1){let e=[...h.tabs],[t]=e.splice(n,1);e.splice(r,0,t),h.tabs=e}},handleDragEnd:()=>{L.value=null}}}var g=r(!1),_=r(null),v=!1,y=()=>{g.value=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement),_.value=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},b=()=>{y()},x=()=>{v||typeof document>`u`||(y(),document.addEventListener(`fullscreenchange`,b),document.addEventListener(`webkitfullscreenchange`,b),document.addEventListener(`mozfullscreenchange`,b),document.addEventListener(`MSFullscreenChange`,b),v=!0)};function S(e){x();let t=()=>e||document.documentElement,n=async()=>{let e=t();if(!e){console.warn(`[useFullscreen] Target element not found`);return}try{e.requestFullscreen?await e.requestFullscreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.msRequestFullscreen?await e.msRequestFullscreen():console.warn(`[useFullscreen] Fullscreen API is not supported`)}catch(e){console.error(`[useFullscreen] Failed to enter fullscreen:`,e)}},r=async()=>{try{document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.msExitFullscreen&&await document.msExitFullscreen()}catch(e){console.error(`[useFullscreen] Failed to exit fullscreen:`,e)}};return{isFullscreen:g,fullscreenElement:_,enter:n,exit:r,toggle:async()=>{g.value?await r():await n()},isSupported:()=>{let e=t();return!!(e&&(e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen))}}}export{m as a,p as i,S as n,h as r,g as t};