import"./ScrollArea-BHIjOMNw.js";import"./Presence-jUNGdmIs.js";import{Bi as e,Ha as t,Ii as n,Ki as r,Li as i,Pa as a,Ri as o,Ui as s,Wa as c,Wi as l,an as u,d,ia as f,ji as p,l as m,la as h,p as g,pa as _,qa as v,qn as y,sa as b,wa as x}from"./index-DX59uxwP.js";import"./_plugin-vue_export-helper-CuErARa7.js";import"./badge-BXmY1uTp.js";import{n as S,t as C}from"./CardContent-DuACdMkv.js";import{n as w,t as T}from"./CardTitle-Bo9EKq0R.js";import{a as E}from"./bento-BAsuEzok.js";var D={class:`space-y-6`},O={class:`flex flex-wrap gap-3`},k={class:`flex items-baseline gap-2`},A={class:`text-lg font-semibold`},j={class:`text-xs text-muted-foreground`},M={class:`text-xs text-green-500`},N={class:`grid grid-cols-1 lg:grid-cols-2 gap-6`},P={class:`h-[300px] overflow-auto`},F={key:0,class:`space-y-4`},I={class:`font-medium`},L={class:`text-2xl font-bold mt-1`},R={class:`text-right`},z={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},B={class:`text-center`},V={class:`h-[300px] flex flex-col justify-center`},H={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},U={class:`text-center`},W=r({__name:`UsersAnalysis`,setup(r){let W=a({totalUsers:0,newUsers:0,activeUsers:0,retentionRate:`0%`,growth:0}),G=a([]),K=n(()=>[{title:`总用户数`,value:W.value.totalUsers.toLocaleString(),icon:m,color:`text-blue-500`,trend:`+15.2%`},{title:`新增用户`,value:W.value.newUsers.toLocaleString(),icon:d,color:`text-green-500`,trend:`+22.1%`},{title:`活跃用户`,value:W.value.activeUsers.toLocaleString(),icon:g,color:`text-purple-500`,trend:`+8.7%`},{title:`留存率`,value:W.value.retentionRate,icon:u,color:`text-orange-500`,trend:`+3.2%`}]),q=async()=>{try{let[e,t]=await Promise.all([y.getCoreMetrics(`7d`),y.getUserBehavior()]);W.value={totalUsers:e.newUsers*5,newUsers:e.newUsers,activeUsers:Math.round(e.newUsers*2.5),retentionRate:`68.5%`,growth:e.newUsersChange},G.value=t}catch(e){console.error(`获取用户数据失败:`,e)}};return f(()=>{q()}),(n,r)=>(b(),e(`div`,D,[r[5]||=i(`div`,{class:`flex flex-col sm:flex-row sm:items-center justify-between gap-4`},[i(`div`,null,[i(`h1`,{class:`text-3xl font-bold tracking-tight`},`用户分析`),i(`p`,{class:`text-muted-foreground mt-1.5 text-sm`},`分析用户增长和活跃度`)])],-1),i(`div`,O,[(b(!0),e(p,null,h(t(K),t=>(b(),e(`div`,{key:t.title,class:`flex items-center gap-3 px-4 py-2.5 bg-muted/50 rounded-lg hover:bg-muted/70 transition-colors`},[(b(),o(_(t.icon),{class:c([`h-4 w-4`,t.color])},null,8,[`class`])),i(`div`,k,[i(`span`,A,v(t.value),1),i(`span`,j,v(t.title),1),i(`span`,M,v(t.trend),1)])]))),128))]),i(`div`,N,[l(t(S),{class:`bg-muted/40 border border-border/50 rounded-xl`},{default:x(()=>[l(t(w),null,{default:x(()=>[l(t(T),{class:`text-base`},{default:x(()=>[...r[0]||=[s(`用户行为数据`,-1)]]),_:1})]),_:1}),l(t(C),null,{default:x(()=>[i(`div`,P,[t(G).length>0?(b(),e(`div`,F,[(b(!0),e(p,null,h(t(G),t=>(b(),e(`div`,{key:t.label,class:`flex items-center justify-between p-3 bg-muted/50 rounded-lg`},[i(`div`,null,[i(`p`,I,v(t.label),1),i(`p`,L,v(t.value),1)]),i(`div`,R,[i(`p`,{class:c([`text-xs`,t.isPositive?`text-green-500`:`text-red-500`])},v(t.isPositive?`↑`:`↓`)+` `+v(t.change)+`% `,3)])]))),128))])):(b(),e(`div`,z,[i(`div`,B,[l(t(m),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),r[1]||=i(`p`,null,`加载中...`,-1)])]))])]),_:1})]),_:1}),l(t(S),{class:`bg-muted/40 border border-border/50 rounded-xl`},{default:x(()=>[l(t(w),null,{default:x(()=>[l(t(T),{class:`text-base`},{default:x(()=>[...r[2]||=[s(`用户增长趋势`,-1)]]),_:1})]),_:1}),l(t(C),null,{default:x(()=>[i(`div`,V,[t(W).totalUsers>0?(b(),o(t(E),{key:0,type:`line`,data:[t(W).totalUsers*.8,t(W).totalUsers*.85,t(W).totalUsers*.9,t(W).totalUsers*.95,t(W).totalUsers],color:`bg-purple-500`,height:200},null,8,[`data`])):(b(),e(`div`,H,[i(`div`,U,[l(t(u),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),r[3]||=i(`p`,null,`加载中...`,-1)])])),r[4]||=i(`div`,{class:`mt-4 flex justify-between text-xs text-muted-foreground`},[i(`span`,null,`周一`),i(`span`,null,`周二`),i(`span`,null,`周三`),i(`span`,null,`周四`),i(`span`,null,`周五`)],-1)])]),_:1})]),_:1})])]))}});export{W as default};