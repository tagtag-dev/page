import{Bi as e,Di as t,Ea as n,Gi as r,Oa as i,S as a,Ti as o,Ui as s,Yi as c,_i as ee,fi as l,ga as u,ka as d,kn as f,oa as p,p as m,pt as h,vi as g,wa as _,wi as v,xi as y,yi as b,z as x}from"./index-D9LA8apy.js";import{n as S,t as C}from"./CardContent-bGWyUVF7.js";import{n as w,t as T}from"./CardTitle-9YsRePqj.js";var E={class:`space-y-6`},D={class:`flex flex-wrap gap-3`},O={class:`flex items-baseline gap-2`},k={class:`text-lg font-semibold`},A={class:`text-xs text-muted-foreground`},j={class:`text-xs text-green-500`},M={class:`grid grid-cols-1 lg:grid-cols-2 gap-6`},N={class:`h-[300px] overflow-auto`},P={key:0,class:`space-y-3`},F={class:`w-6 h-6 flex items-center justify-center bg-primary text-primary-foreground text-xs font-bold rounded`},I={class:`flex-1`},L={class:`font-medium`},R={class:`text-xs text-muted-foreground`},z={class:`text-right`},B={class:`font-semibold`},V={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},H={class:`text-center`},U={class:`h-[300px] overflow-auto`},W={key:0,class:`space-y-4`},G={class:`flex justify-between text-sm`},K={class:`font-medium`},q={class:`h-2 bg-muted rounded-full overflow-hidden`},J={class:`text-xs text-muted-foreground`},Y={key:1,class:`flex items-center justify-center text-muted-foreground h-full`},X={class:`text-center`},Z=t({__name:`Sales`,setup(t){let Z=u({totalSales:0,totalOrders:0,avgOrderValue:0,conversionRate:`0%`,growth:0}),Q=u([]),$=u([]),te=ee(()=>[{title:`总销售额`,value:`¥`+Z.value.totalSales.toLocaleString(),icon:h,color:`text-green-500`,trend:`+18.5%`},{title:`订单数量`,value:Z.value.totalOrders.toLocaleString(),icon:a,color:`text-blue-500`,trend:`+12.3%`},{title:`客单价`,value:`¥`+Z.value.avgOrderValue,icon:x,color:`text-purple-500`,trend:`+5.2%`},{title:`转化率`,value:Z.value.conversionRate,icon:m,color:`text-orange-500`,trend:`+0.8%`}]),ne=async()=>{try{let[e,t,n]=await Promise.all([f.getCoreMetrics(`7d`),f.getTopProducts(5),f.getCategoryShares()]);Z.value={totalSales:Math.round(e.avgOrderValue*e.totalVisits*e.conversionRate/100),totalOrders:Math.round(e.totalVisits*e.conversionRate/100),avgOrderValue:e.avgOrderValue,conversionRate:e.conversionRate.toFixed(2)+`%`,growth:e.avgOrderValueChange},Q.value=t,$.value=n}catch(e){console.error(`获取销售数据失败:`,e)}};return e(()=>{ne()}),(e,t)=>(s(),y(`div`,E,[t[4]||=g(`div`,{class:`flex flex-col sm:flex-row sm:items-center justify-between gap-4`},[g(`div`,null,[g(`h1`,{class:`text-3xl font-bold tracking-tight`},`销售分析`),g(`p`,{class:`text-muted-foreground mt-1.5 text-sm`},`分析销售数据和订单趋势`)])],-1),g(`div`,D,[(s(!0),y(l,null,r(_(te),e=>(s(),y(`div`,{key:e.title,class:`flex items-center gap-3 px-4 py-2.5 bg-muted/50 rounded-lg hover:bg-muted/70 transition-colors`},[(s(),b(c(e.icon),{class:n([`h-4 w-4`,e.color])},null,8,[`class`])),g(`div`,O,[g(`span`,k,d(e.value),1),g(`span`,A,d(e.title),1),g(`span`,j,d(e.trend),1)])]))),128))]),g(`div`,M,[o(_(S),{class:`border-0 shadow-sm`},{default:p(()=>[o(_(w),null,{default:p(()=>[o(_(T),{class:`text-base`},{default:p(()=>[...t[0]||=[v(`热销商品`,-1)]]),_:1})]),_:1}),o(_(C),null,{default:p(()=>[g(`div`,N,[_(Q).length>0?(s(),y(`div`,P,[(s(!0),y(l,null,r(_(Q),(e,t)=>(s(),y(`div`,{key:e.id,class:`flex items-center gap-3 p-3 bg-muted/50 rounded-lg`},[g(`span`,F,d(t+1),1),g(`div`,I,[g(`p`,L,d(e.name),1),g(`p`,R,`销量: `+d(e.sales),1)]),g(`div`,z,[g(`p`,B,`¥`+d(e.revenue.toLocaleString()),1),g(`p`,{class:n([`text-xs`,e.trend>0?`text-green-500`:`text-red-500`])},d(e.trend>0?`+`:``)+d(e.trend)+`% `,3)])]))),128))])):(s(),y(`div`,V,[g(`div`,H,[o(_(m),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),t[1]||=g(`p`,null,`加载中...`,-1)])]))])]),_:1})]),_:1}),o(_(S),{class:`border-0 shadow-sm`},{default:p(()=>[o(_(w),null,{default:p(()=>[o(_(T),{class:`text-base`},{default:p(()=>[...t[2]||=[v(`品类销售占比`,-1)]]),_:1})]),_:1}),o(_(C),null,{default:p(()=>[g(`div`,U,[_($).length>0?(s(),y(`div`,W,[(s(!0),y(l,null,r(_($),e=>(s(),y(`div`,{key:e.name,class:`space-y-2`},[g(`div`,G,[g(`span`,null,d(e.name),1),g(`span`,K,d(e.percentage)+`%`,1)]),g(`div`,q,[g(`div`,{class:n([e.color,`h-full rounded-full transition-all duration-500`]),style:i({width:e.percentage+`%`})},null,6)]),g(`p`,J,`¥`+d(e.amount.toLocaleString()),1)]))),128))])):(s(),y(`div`,Y,[g(`div`,X,[o(_(x),{class:`w-12 h-12 mx-auto mb-2 opacity-50`}),t[3]||=g(`p`,null,`加载中...`,-1)])]))])]),_:1})]),_:1})])]))}});export{Z as default};