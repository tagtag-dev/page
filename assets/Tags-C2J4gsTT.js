import"./ScrollArea-DFVXjTz0.js";import"./RovingFocusItem-CVjkq2qt.js";import"./Presence-3Lrzvetv.js";import"./defu-DUbmuhNq.js";import"./TabsTrigger-DqwypIQj.js";import{Ai as e,Ca as t,Fi as n,Ga as ee,Gi as r,Hi as i,Ii as a,Jn as o,Ka as s,Li as c,Na as l,Oa as u,Ri as d,Ua as f,Ui as p,V as m,Va as h,ca as g,fa as te,n as _,oa as v,x as y,zi as b}from"./index-D6Cod0pL.js";import"./en_US-LGbIKe0x.js";import"./common-HQCQB71w.js";import"./zh_CN-Cgumeokr.js";import"./useFullscreen-lrjpQVTw.js";import"./_plugin-vue_export-helper-Dey4FfNi.js";import"./dist-D3XftLPo.js";import"./theme-shared-BpTdpb0d.js";import{t as x}from"./TTable-B13ZnM5N.js";import"./useTableColumns-qs-cYpaB.js";import{t as S}from"./TForm-Drq7Qn9R.js";import"./TIcon-C-hNhMC1.js";import{t as C}from"./TModal-OyBXzO5K.js";import{n as ne,t as re}from"./CardContent-CMuL0LxG.js";import{n as ie,t as ae}from"./CardTitle-D06OZslX.js";import{n as oe}from"./composables-CTAVZAup.js";var se={class:`space-y-6`},w={class:`flex flex-col sm:flex-row sm:items-center justify-between gap-4`},T={class:`flex flex-wrap gap-3`},E={class:`flex items-baseline gap-2`},D={class:`text-lg font-semibold`},O={class:`text-xs text-muted-foreground`},k={class:`bg-muted/40 border border-border/50 rounded-xl px-3 py-3`},A={class:`flex flex-col lg:flex-row lg:items-center gap-4`},j={class:`flex-1`},M={class:`flex items-center gap-3`},N={class:`text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded-full`},P={class:`flex items-center gap-2`},F={class:`font-medium`},I={class:`flex items-center gap-2`},L={class:`text-xs text-muted-foreground`},R={class:`flex flex-col items-center justify-center py-12 text-muted-foreground`},z={class:`w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4`},B=r({__name:`Tags`,setup(r){let{data:B,loading:ce,searchQuery:V,filteredData:le,paginatedData:H,total:ue,statistics:U,fetchData:W}=oe({apiCall:async()=>{let e=await o.getTags();return{list:e.list||[],total:e.total||0,page:e.page||1,pageSize:e.pageSize||10}},filterFn:(e,t)=>{if(!t)return e;let n=t.toLowerCase();return e.filter(e=>e.name.toLowerCase().includes(n))},statisticsFn:e=>({total:e.length,totalProducts:e.reduce((e,t)=>e+t.productCount,0)})}),G=l({keyword:``}),K={layout:`inline`,fields:[{name:`keyword`,type:`input`,label:``,placeholder:`搜索标签名称...`,className:`w-[240px]`}],searchConfig:{enabled:!0,collapsed:!1,showCollapseButton:!1,searchText:`搜索`,resetText:`重置`,showReset:!0,onSearch:e=>{V.value=e.keyword||``},onReset:()=>{V.value=``}}},de=n(()=>({columns:[{title:`标签名称`,dataIndex:`name`,width:180,slot:`name`},{title:`颜色`,dataIndex:`color`,width:120,slot:`color`},{title:`关联商品`,dataIndex:`productCount`,width:120,sorter:!0},{title:`创建时间`,dataIndex:`createdAt`,width:150}],pagination:{pageSize:10,show:!0,showSizeChanger:!0},rowSelection:{type:`checkbox`,show:!0},actions:[{text:`编辑`,type:`primary`,onClick:e=>he(e)},{text:`删除`,type:`danger`,confirm:!0,confirmText:`确定要删除该标签吗？`,onClick:e=>$(e.id)}],actionWidth:150,actionFixed:`right`})),q=n(()=>H.value.map(e=>({...e,key:e.id}))),J=l(!1),Y=l(!1),X=l(null),Z=l({name:``,color:`#1890ff`}),Q=l({id:``,name:``,color:`#1890ff`}),fe={layout:`horizontal`,labelCol:{span:6},wrapperCol:{span:18},fields:[{name:`name`,type:`input`,label:`标签名称`,placeholder:`请输入标签名称`,rules:[{required:!0,message:`标签名称不能为空`}]},{name:`color`,type:`input`,label:`标签颜色`,placeholder:`请输入颜色值，如 #1890ff`}],actions:{showSubmit:!0,showReset:!0,submitText:`添加标签`,resetText:`取消`,align:`right`,onReset:()=>{J.value=!1}}},pe={layout:`horizontal`,labelCol:{span:6},wrapperCol:{span:18},fields:[{name:`name`,type:`input`,label:`标签名称`,placeholder:`请输入标签名称`,rules:[{required:!0,message:`标签名称不能为空`}]},{name:`color`,type:`input`,label:`标签颜色`,placeholder:`请输入颜色值`}],actions:{showSubmit:!0,showReset:!0,submitText:`保存修改`,resetText:`取消`,align:`right`,onReset:()=>{Y.value=!1}}};async function me(e){await o.createTag({name:e.name,color:e.color||`#1890ff`}),J.value=!1,Z.value={name:``,color:`#1890ff`},await W()}function he(e){X.value=e,Q.value={id:e.id,name:e.name,color:e.color},Y.value=!0}async function ge(e){X.value&&(await o.updateTag(X.value.id,{name:e.name,color:e.color}),Y.value=!1,X.value=null,await W())}async function $(e){await o.deleteTag(e),await W()}let _e=l([]);function ve(e){_e.value=e}let ye=n(()=>[{title:`标签总数`,value:U.value.total||0,icon:y,color:`text-primary`},{title:`关联商品`,value:U.value.totalProducts||0,icon:m,color:`text-green-500`}]);return(n,r)=>(v(),b(`div`,se,[a(`div`,w,[r[9]||=a(`div`,null,[a(`h1`,{class:`text-3xl font-bold tracking-tight`},`标签管理`),a(`p`,{class:`text-muted-foreground mt-1.5 text-sm`},`管理商品标签和标记`)],-1),p(h(_),{class:`gap-2`,onClick:r[0]||=e=>J.value=!0},{default:t(()=>[p(h(m),{class:`h-4 w-4`}),r[8]||=i(` 添加标签 `,-1)]),_:1})]),p(h(C),{open:h(J),"onUpdate:open":r[2]||=e=>u(J)?J.value=e:null,title:`添加标签`,width:`480`,footer:null},{default:t(()=>[p(h(S),{modelValue:h(Z),"onUpdate:modelValue":r[1]||=e=>u(Z)?Z.value=e:null,schema:fe,onSubmit:me},null,8,[`modelValue`])]),_:1},8,[`open`]),p(h(C),{open:h(Y),"onUpdate:open":r[4]||=e=>u(Y)?Y.value=e:null,title:`编辑标签`,width:`480`,footer:null},{default:t(()=>[h(X)?(v(),c(h(S),{key:0,modelValue:h(Q),"onUpdate:modelValue":r[3]||=e=>u(Q)?Q.value=e:null,schema:pe,onSubmit:ge},null,8,[`modelValue`])):d(``,!0)]),_:1},8,[`open`]),a(`div`,T,[(v(!0),b(e,null,g(h(ye),e=>(v(),b(`div`,{key:e.title,class:`flex items-center gap-3 px-4 py-2.5 bg-muted/50 rounded-lg hover:bg-muted/70 transition-colors`},[(v(),c(te(e.icon),{class:f([`h-4 w-4`,e.color])},null,8,[`class`])),a(`div`,E,[a(`span`,D,s(e.value),1),a(`span`,O,s(e.title),1)])]))),128))]),a(`div`,k,[a(`div`,A,[a(`div`,j,[p(h(S),{modelValue:h(G),"onUpdate:modelValue":r[5]||=e=>u(G)?G.value=e:null,schema:K},null,8,[`modelValue`])])])]),p(h(ne),{class:`bg-muted/40 border border-border/50 rounded-xl`},{default:t(()=>[p(h(ie),{class:`pb-4`},{default:t(()=>[a(`div`,M,[p(h(ae),{class:`text-base font-semibold`},{default:t(()=>[...r[10]||=[i(`标签列表`,-1)]]),_:1}),a(`span`,N,` 共 `+s(h(q).length)+` 个 `,1)])]),_:1}),p(h(re),{class:`pt-0`},{default:t(()=>[p(h(x),{ref:`tableRef`,data:h(q),"onUpdate:data":r[7]||=e=>u(q)?q.value=e:null,schema:h(de),onSelectChange:ve},{name:t(e=>[a(`div`,P,[p(h(y),{class:`h-4 w-4`}),a(`span`,F,s(e.text),1)])]),color:t(e=>[a(`div`,I,[a(`div`,{class:`w-6 h-6 rounded border`,style:ee({backgroundColor:e.text})},null,4),a(`span`,L,s(e.text),1)])]),emptyText:t(()=>[a(`div`,R,[a(`div`,z,[p(h(y),{class:`w-8 h-8 text-muted-foreground/50`})]),r[12]||=a(`p`,{class:`text-base font-medium mb-1`},`暂无标签数据`,-1),r[13]||=a(`p`,{class:`text-sm text-muted-foreground mb-4`},`开始添加您的第一个标签吧`,-1),p(h(_),{size:`sm`,onClick:r[6]||=e=>J.value=!0},{default:t(()=>[p(h(m),{class:`h-4 w-4 mr-1`}),r[11]||=i(` 添加标签 `,-1)]),_:1})])]),_:1},8,[`data`,`schema`])]),_:1})]),_:1})]))}});export{B as default};