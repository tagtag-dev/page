import"./RovingFocusItem-tfPyown7.js";import"./Presence-CTcpkTiJ.js";import{t as e}from"./Separator-Cqrm4hwz.js";import{n as t,r as n,t as r}from"./TabsTrigger-BVA-KY5p.js";import{t as i}from"./TabsContent-BXAfEHEA.js";import{Bi as a,Ha as o,Ii as s,J as ee,Ki as c,Kn as l,Li as u,Lt as te,M as ne,N as d,Pt as f,Ri as p,Ta as m,Ui as h,Wa as g,Wi as _,fa as v,ft as re,ji as y,la as b,n as x,qa as S,r as ie,sa as C,sn as w,u as T,ua as E,wa as D}from"./index-Bdnse1ke.js";import"./en_US-B-0xvqcl.js";import"./common-B6eu2cAW.js";import"./zh_CN-o6dt8jMH.js";import"./useFullscreen-Cz-fRWjR.js";import{t as O}from"./badge-CifgcTtr.js";import"./dist-CIVP1JAM.js";import"./useTableColumns-ClPoF4Nv.js";import"./useResponsive-Drj8-vqi.js";import{n as k,t as A}from"./CardContent-CE0o8nDP.js";import{t as j}from"./CardDescription-CHuAdAMQ.js";import{n as M,t as N}from"./CardTitle-BRqhnrl0.js";import{t as ae}from"./composables-cmucIgPx.js";import{n as P,r as F,t as I}from"./constants-OTiF8S51.js";var oe=c({__name:`Alert`,props:{class:{},variant:{}},setup(e){let t=e;return(n,r)=>(C(),a(`div`,{"data-slot":`alert`,class:g(o(w)(o(z)({variant:e.variant}),t.class)),role:`alert`},[E(n.$slots,`default`)],2))}}),L=c({__name:`AlertDescription`,props:{class:{}},setup(e){let t=e;return(e,n)=>(C(),a(`div`,{"data-slot":`alert-description`,class:g(o(w)(`text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed`,t.class))},[E(e.$slots,`default`)],2))}}),R=c({__name:`AlertTitle`,props:{class:{}},setup(e){let t=e;return(e,n)=>(C(),a(`div`,{"data-slot":`alert-title`,class:g(o(w)(`col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight`,t.class))},[E(e.$slots,`default`)],2))}});const z=ie(`relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current`,{variants:{variant:{default:`bg-card text-card-foreground`,destructive:`text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90`}},defaultVariants:{variant:`default`}});var B={class:`container mx-auto p-6 space-y-6`},V={class:`mt-2 space-y-1 text-sm`},H={class:`flex flex-wrap gap-2`},U={class:`space-y-2`},W={class:`flex flex-wrap gap-2`},G={class:`space-y-2`},K={class:`flex flex-wrap gap-2`},q={class:`space-y-2`},se={class:`flex flex-wrap gap-2`},ce={class:`space-y-2`},le={class:`flex flex-wrap gap-2`},ue={class:`space-y-2`},de={class:`grid gap-2`},fe={class:`text-sm`},pe={class:`space-y-2`},me={class:`grid gap-2`},he={class:`text-sm font-medium`},ge={class:`text-xs text-muted-foreground`},_e={class:`space-y-2`},ve={class:`flex flex-wrap gap-2`},ye={class:`space-y-2`},be={class:`flex flex-wrap gap-2`},xe={class:`space-y-2`},Se={class:`flex flex-wrap gap-2`},Ce={class:`space-y-2`},we={class:`p-4 bg-muted rounded-lg`},Te={class:`text-sm`},J={class:`text-sm`},Y=c({__name:`PermissionDemo`,setup(c){let{hasPermission:g,hasAnyPermission:ie,hasAllPermissions:w,hasRole:E,isAdmin:z,isAuthenticated:Y}=ae(),X=l(),Z=s(()=>X.user),Ee=s(()=>X.user?.permissions||[]),De=[{name:`用户创建权限 (user:create)`,code:F.CREATE},{name:`用户更新权限 (user:update)`,code:F.UPDATE},{name:`用户删除权限 (user:delete)`,code:F.DELETE},{name:`产品创建权限 (product:create)`,code:P.CREATE},{name:`订单审核权限 (order:audit)`,code:I.AUDIT}].map(e=>({name:e.name,code:e.code,hasPermission:s(()=>X.user?.permissions.includes(`*`)||X.user?.permissions.includes(e.code)||!1)})),Q=s(()=>X.user?.permissions.includes(`*`)||X.user?.permissions.includes(F.CREATE)||!1),$=s(()=>X.user?.permissions.includes(`*`)||X.user?.permissions.includes(F.UPDATE)||!1),Oe=s(()=>X.user?.permissions.includes(`*`)||X.user?.permissions.includes(F.DELETE)||!1),ke=[{name:`拥有任意用户权限（创建/更新/删除）`,result:s(()=>Q.value||$.value||Oe.value),description:`hasAnyPermission([user:create, user:update, user:delete])`},{name:`同时拥有用户创建和更新权限`,result:s(()=>Q.value&&$.value),description:`hasAllPermissions([user:create, user:update])`},{name:`是管理员角色`,result:s(()=>X.user?.role===`admin`),description:`hasRole('admin')`},{name:`是管理员（计算属性）`,result:z,description:`isAdmin.value`}],Ae=[{label:`管理员（全部权限）`,role:`admin`,permissions:[`*`]},{label:`编辑者（读写权限）`,role:`editor`,permissions:[`user:read`,`user:update`,`product:read`,`product:update`,`order:read`,`order:update`]},{label:`访客（只读权限）`,role:`viewer`,permissions:[`user:read`,`product:read`,`order:read`]},{label:`无权限`,role:`guest`,permissions:[]}],je=e=>{X.user&&(X.user.role=e.role,X.user.permissions=e.permissions)};return(s,c)=>{let l=v(`permission`),g=v(`role`);return C(),a(`div`,B,[c[49]||=u(`div`,{class:`space-y-2`},[u(`h1`,{class:`text-3xl font-bold tracking-tight`},`权限控制演示 (RBAC Demo)`),u(`p`,{class:`text-muted-foreground`},` 本页面展示如何使用 v-permission 指令和 usePermission 组合式函数进行权限控制 `)],-1),_(o(oe),null,{default:D(()=>[_(o(re),{class:`h-4 w-4`}),_(o(R),null,{default:D(()=>[...c[0]||=[h(`当前用户信息`,-1)]]),_:1}),_(o(L),null,{default:D(()=>[u(`div`,V,[u(`p`,null,[c[1]||=u(`strong`,null,`角色:`,-1),h(` `+S(o(Z)?.role||`未登录`),1)]),u(`p`,null,[c[2]||=u(`strong`,null,`权限列表:`,-1),h(` `+S(o(Ee).join(`, `)||`无`),1)]),u(`p`,null,[c[3]||=u(`strong`,null,`是否认证:`,-1),h(` `+S(o(Y)?`是`:`否`),1)])])]),_:1})]),_:1}),_(o(k),null,{default:D(()=>[_(o(M),null,{default:D(()=>[_(o(N),{class:`flex items-center gap-2`},{default:D(()=>[_(o(d),{class:`h-5 w-5`}),c[4]||=h(` 模拟权限切换（演示用） `,-1)]),_:1}),_(o(j),null,{default:D(()=>[...c[5]||=[h(`点击切换不同角色的权限，观察下方按钮和组件的变化`,-1)]]),_:1})]),_:1}),_(o(A),null,{default:D(()=>[u(`div`,H,[(C(),a(y,null,b(Ae,e=>_(o(x),{key:e.label,variant:`outline`,size:`sm`,onClick:t=>je(e)},{default:D(()=>[h(S(e.label),1)]),_:2},1032,[`onClick`])),64))])]),_:1})]),_:1}),_(o(n),{defaultValue:`directive`,class:`w-full`},{default:D(()=>[_(o(t),{class:`grid w-full grid-cols-3`},{default:D(()=>[_(o(r),{value:`directive`},{default:D(()=>[...c[6]||=[h(`指令方式 (v-permission)`,-1)]]),_:1}),_(o(r),{value:`composable`},{default:D(()=>[...c[7]||=[h(`组合式函数 (usePermission)`,-1)]]),_:1}),_(o(r),{value:`role`},{default:D(()=>[...c[8]||=[h(`角色控制 (v-role)`,-1)]]),_:1})]),_:1}),_(o(i),{value:`directive`,class:`space-y-4`},{default:D(()=>[_(o(k),null,{default:D(()=>[_(o(M),null,{default:D(()=>[_(o(N),null,{default:D(()=>[...c[9]||=[h(`v-permission 指令示例`,-1)]]),_:1}),_(o(j),null,{default:D(()=>[...c[10]||=[h(`使用 v-permission 指令控制按钮和元素的显示/隐藏`,-1)]]),_:1})]),_:1}),_(o(A),{class:`space-y-6`},{default:D(()=>[u(`div`,U,[c[14]||=u(`h4`,{class:`text-sm font-semibold`},`1. 单个权限检查`,-1),u(`div`,W,[m((C(),p(o(x),null,{default:D(()=>[_(o(T),{class:`h-4 w-4 mr-2`}),c[11]||=h(` 创建用户 `,-1)]),_:1})),[[l,o(F).CREATE]]),m((C(),p(o(x),{variant:`secondary`},{default:D(()=>[_(o(T),{class:`h-4 w-4 mr-2`}),c[12]||=h(` 编辑用户 `,-1)]),_:1})),[[l,o(F).UPDATE]]),m((C(),p(o(x),{variant:`destructive`},{default:D(()=>[_(o(T),{class:`h-4 w-4 mr-2`}),c[13]||=h(` 删除用户 `,-1)]),_:1})),[[l,o(F).DELETE]])]),c[15]||=u(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-permission="USER_PERMISSIONS.CREATE" `,-1)]),_(o(e)),u(`div`,G,[c[18]||=u(`h4`,{class:`text-sm font-semibold`},`2. 多个权限 - 任一通过 (v-permission:any)`,-1),u(`div`,K,[m((C(),p(o(x),null,{default:D(()=>[...c[16]||=[h(` 用户管理（创建或编辑） `,-1)]]),_:1})),[[l,[o(F).CREATE,o(F).UPDATE],`any`]]),m((C(),p(o(x),{variant:`secondary`},{default:D(()=>[_(o(ee),{class:`h-4 w-4 mr-2`}),c[17]||=h(` 产品管理 `,-1)]),_:1})),[[l,[o(P).CREATE,o(P).UPDATE],`any`]])]),c[19]||=u(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-permission:any="[USER_PERMISSIONS.CREATE, USER_PERMISSIONS.UPDATE]" `,-1)]),_(o(e)),u(`div`,q,[c[21]||=u(`h4`,{class:`text-sm font-semibold`},`3. 多个权限 - 全部通过 (v-permission:all)`,-1),u(`div`,se,[m((C(),p(o(x),null,{default:D(()=>[...c[20]||=[h(` 完整用户管理（需全部权限） `,-1)]]),_:1})),[[l,[o(F).CREATE,o(F).UPDATE,o(F).DELETE],`all`]])]),c[22]||=u(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-permission:all="[USER_PERMISSIONS.CREATE, USER_PERMISSIONS.UPDATE, USER_PERMISSIONS.DELETE]" `,-1)]),_(o(e)),u(`div`,ce,[c[25]||=u(`h4`,{class:`text-sm font-semibold`},`4. 禁用模式 (v-permission.disabled)`,-1),u(`div`,le,[m((C(),p(o(x),{variant:`destructive`},{default:D(()=>[...c[23]||=[h(` 删除（无权限时禁用） `,-1)]]),_:1})),[[l,o(F).DELETE,void 0,{disabled:!0}]]),m((C(),p(o(x),{variant:`secondary`},{default:D(()=>[_(o(ne),{class:`h-4 w-4 mr-2`}),c[24]||=h(` 审核订单 `,-1)]),_:1})),[[l,o(I).AUDIT,void 0,{disabled:!0}]])]),c[26]||=u(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-permission.disabled="USER_PERMISSIONS.DELETE" - 无权限时按钮禁用而非隐藏 `,-1)])]),_:1})]),_:1})]),_:1}),_(o(i),{value:`composable`,class:`space-y-4`},{default:D(()=>[_(o(k),null,{default:D(()=>[_(o(M),null,{default:D(()=>[_(o(N),null,{default:D(()=>[...c[27]||=[h(`usePermission 组合式函数示例`,-1)]]),_:1}),_(o(j),null,{default:D(()=>[...c[28]||=[h(`在 script setup 中使用组合式函数进行权限检查`,-1)]]),_:1})]),_:1}),_(o(A),{class:`space-y-6`},{default:D(()=>[u(`div`,ue,[c[29]||=u(`h4`,{class:`text-sm font-semibold`},`单个权限检查结果`,-1),u(`div`,de,[(C(!0),a(y,null,b(o(De),e=>(C(),a(`div`,{key:e.code,class:`flex items-center justify-between p-2 rounded border`},[u(`span`,fe,S(e.name),1),_(o(O),{variant:e.hasPermission.value?`default`:`secondary`},{default:D(()=>[e.hasPermission.value?(C(),p(o(te),{key:0,class:`h-3 w-3 mr-1`})):(C(),p(o(f),{key:1,class:`h-3 w-3 mr-1`})),h(` `+S(e.hasPermission.value?`有权限`:`无权限`),1)]),_:2},1032,[`variant`])]))),128))])]),_(o(e)),u(`div`,pe,[c[30]||=u(`h4`,{class:`text-sm font-semibold`},`组合权限检查结果`,-1),u(`div`,me,[(C(),a(y,null,b(ke,e=>u(`div`,{key:e.name,class:`flex items-center justify-between p-2 rounded border`},[u(`div`,null,[u(`p`,he,S(e.name),1),u(`p`,ge,S(e.description),1)]),_(o(O),{variant:e.result.value?`default`:`secondary`},{default:D(()=>[h(S(e.result.value?`通过`:`未通过`),1)]),_:2},1032,[`variant`])])),64))])]),_(o(e)),c[31]||=u(`div`,{class:`space-y-2`},[u(`h4`,{class:`text-sm font-semibold`},`使用示例代码`),u(`pre`,{class:`p-4 bg-muted rounded-lg text-xs overflow-x-auto`},[u(`code`,null,`// 在 script setup 中使用
const { hasPermission, hasAnyPermission, hasAllPermissions } = usePermission()

// 检查单个权限
const canCreate = hasPermission(USER_PERMISSIONS.CREATE)

// 检查任一权限
const canEdit = hasAnyPermission([USER_PERMISSIONS.CREATE, USER_PERMISSIONS.UPDATE])

// 检查全部权限
const canManage = hasAllPermissions([USER_PERMISSIONS.CREATE, USER_PERMISSIONS.UPDATE, USER_PERMISSIONS.DELETE])

// 在模板中使用
<Button :disabled="!canCreate">创建</Button>`)])],-1)]),_:1})]),_:1})]),_:1}),_(o(i),{value:`role`,class:`space-y-4`},{default:D(()=>[_(o(k),null,{default:D(()=>[_(o(M),null,{default:D(()=>[_(o(N),null,{default:D(()=>[...c[32]||=[h(`v-role 角色控制示例`,-1)]]),_:1}),_(o(j),null,{default:D(()=>[...c[33]||=[h(`使用 v-role 指令基于角色控制元素显示`,-1)]]),_:1})]),_:1}),_(o(A),{class:`space-y-6`},{default:D(()=>[u(`div`,_e,[c[36]||=u(`h4`,{class:`text-sm font-semibold`},`1. 单个角色检查`,-1),u(`div`,ve,[m((C(),p(o(x),{variant:`default`},{default:D(()=>[_(o(d),{class:`h-4 w-4 mr-2`}),c[34]||=h(` 仅管理员可见 `,-1)]),_:1})),[[g,`admin`]]),m((C(),p(o(x),{variant:`secondary`},{default:D(()=>[...c[35]||=[h(` 仅编辑者可见 `,-1)]]),_:1})),[[g,`editor`]])]),c[37]||=u(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-role="'admin'" - 仅 admin 角色可见 `,-1)]),_(o(e)),u(`div`,ye,[c[39]||=u(`h4`,{class:`text-sm font-semibold`},`2. 多个角色 - 任一通过 (v-role:any)`,-1),u(`div`,be,[m((C(),p(o(x),{variant:`default`},{default:D(()=>[_(o(d),{class:`h-4 w-4 mr-2`}),c[38]||=h(` 管理员或编辑者可见 `,-1)]),_:1})),[[g,[`admin`,`editor`],`any`]])]),c[40]||=u(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-role:any="['admin', 'editor']" - admin 或 editor 角色可见 `,-1)]),_(o(e)),u(`div`,xe,[c[42]||=u(`h4`,{class:`text-sm font-semibold`},`3. 角色禁用模式 (v-role.disabled)`,-1),u(`div`,Se,[m((C(),p(o(x),{variant:`destructive`},{default:D(()=>[...c[41]||=[h(` 管理员操作（无权限时禁用） `,-1)]]),_:1})),[[g,`admin`,void 0,{disabled:!0}]])]),c[43]||=u(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-role.disabled="'admin'" - 非 admin 角色时按钮禁用 `,-1)]),_(o(e)),u(`div`,Ce,[c[46]||=u(`h4`,{class:`text-sm font-semibold`},`当前角色信息`,-1),u(`div`,we,[u(`p`,Te,[c[44]||=u(`strong`,null,`当前角色:`,-1),h(` `+S(o(Z)?.role||`未登录`),1)]),u(`p`,J,[c[45]||=u(`strong`,null,`是否管理员:`,-1),h(` `+S(o(z)?`是`:`否`),1)])])])]),_:1})]),_:1})]),_:1})]),_:1}),_(o(k),null,{default:D(()=>[_(o(M),null,{default:D(()=>[_(o(N),null,{default:D(()=>[...c[47]||=[h(`使用说明`,-1)]]),_:1})]),_:1}),_(o(A),{class:`space-y-4`},{default:D(()=>[...c[48]||=[u(`div`,{class:`grid gap-4 md:grid-cols-2`},[u(`div`,{class:`space-y-2`},[u(`h4`,{class:`font-semibold`},`指令方式 (模板中直接使用)`),u(`ul`,{class:`text-sm text-muted-foreground space-y-1 list-disc list-inside`},[u(`li`,null,`v-permission="'user:create'" - 单个权限`),u(`li`,null,`v-permission:any="[...]" - 任一权限`),u(`li`,null,`v-permission:all="[...]" - 全部权限`),u(`li`,null,`v-permission.disabled="..." - 禁用模式`),u(`li`,null,`v-role="'admin'" - 角色检查`)])]),u(`div`,{class:`space-y-2`},[u(`h4`,{class:`font-semibold`},`组合式函数方式 (script setup 中使用)`),u(`ul`,{class:`text-sm text-muted-foreground space-y-1 list-disc list-inside`},[u(`li`,null,`hasPermission(permission) - 检查单个权限`),u(`li`,null,`hasAnyPermission([...]) - 任一权限通过`),u(`li`,null,`hasAllPermissions([...]) - 全部权限通过`),u(`li`,null,`hasRole(role) - 检查角色`),u(`li`,null,`isAdmin - 是否管理员`)])])],-1)]]),_:1})]),_:1})])}}});export{Y as default};