import{Bn as e,Ca as t,Ii as n,Tn as r,Vn as i,_i as a,an as o,er as s,ga as c,in as l,na as u,t as d,tr as f}from"./index-D9LA8apy.js";function p(e){return e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase()).replace(/^[a-z]/,e=>e.toUpperCase())}function m(e){if(e)return d[p(e)]}function h(e){return a(()=>m(t(e)))}function g(t){let{scrollContainerRef:d,tabsContainerRef:p}=t,m=s(),h=f(),{t:g,locale:_}=e(),v=r(),y=i(),b=c(!1),{x,arrivedState:S}=o(d,{behavior:`smooth`}),C=()=>{n(()=>{let e=d.value,t=p.value;if(!e||!t){b.value=!1;return}b.value=t.scrollWidth>e.clientWidth})};l(d,C),u(()=>v.tabs.length,C,{immediate:!0});let w=a(()=>b.value&&!S.left),T=a(()=>b.value&&!S.right),E=a(()=>{if(!b.value)return 0;let e=d.value,t=p.value;if(!e||!t)return 0;let n=t.scrollWidth-e.clientWidth;return n<=0?0:x.value/n*100}),D=e=>{n(()=>{let t=p.value?.querySelector(`[data-tab-path="${e}"]`);if(t&&d.value){let e=d.value.getBoundingClientRect(),n=t.getBoundingClientRect(),r=d.value.scrollLeft,i=n.left+n.width/2-e.left,a=e.width/2,o=r+i-a;d.value.scrollTo({left:o,behavior:`smooth`})}})},O=()=>{d.value?.scrollBy({left:-200,behavior:`smooth`})},k=()=>{d.value?.scrollBy({left:200,behavior:`smooth`})},A=()=>{d.value?.scrollTo({left:0,behavior:`smooth`})},j=()=>{d.value&&d.value.scrollTo({left:d.value.scrollWidth,behavior:`smooth`})},M=e=>{v.activateTab(e),h.push(e)},N=e=>{v.removeTab(e)},P=e=>{v.refreshTab(e),window.dispatchEvent(new CustomEvent(`tab-refresh`,{detail:{path:e}}))},F=e=>{v.closeOtherTabs(e)},I=e=>{v.closeLeftTabs(e)},L=e=>{v.closeRightTabs(e)},R=()=>{v.closeAllTabs();let e=v.tabs.find(e=>e.affix);e&&h.push(e.path)},z=c(null);return u([()=>m.path,()=>y.isLoaded],([e,t])=>{if(!e||!t)return;let n=v.tabs.find(t=>t.path===e);if(n){let t=y.getRouteTitle(e),r=y.flatMenus.find(t=>t.path===e);t&&t!==n.title&&(n.title=t),r?.icon&&!n.icon&&(n.icon=r.icon),v.activateTab(e),D(e);return}let r=y.getRouteTitle(e),i=y.flatMenus.find(t=>t.path===e);v.addTab({path:e,title:r,icon:i?.icon,affix:e===`/dashboard`}),D(e)},{immediate:!0}),{isOverflowing:b,canScrollLeft:w,canScrollRight:T,scrollProgress:E,scrollToTab:D,scrollLeft:O,scrollRight:k,scrollToStart:A,scrollToEnd:j,handleTabClick:M,handleCloseTab:N,handleRefreshTab:P,handleCloseOthers:F,handleCloseLeft:I,handleCloseRight:L,handleCloseAll:R,handleDragStart:(e,t)=>{z.value=t,e.dataTransfer&&(e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t))},handleDragOver:(e,t)=>{if(e.preventDefault(),!z.value||z.value===t)return;let n=v.tabs.findIndex(e=>e.path===z.value),r=v.tabs.findIndex(e=>e.path===t);if(n!==-1&&r!==-1){let e=[...v.tabs],[t]=e.splice(n,1);e.splice(r,0,t),v.tabs=e}},handleDragEnd:()=>{z.value=null}}}export{m as n,h as r,g as t};