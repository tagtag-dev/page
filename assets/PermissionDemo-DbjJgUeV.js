import"./RovingFocusItem-CVjkq2qt.js";import"./Presence-3Lrzvetv.js";import"./defu-DUbmuhNq.js";import{t as e}from"./Separator-CZCag7UD.js";import{n as t,r as n,t as r}from"./TabsTrigger-DqwypIQj.js";import{t as i}from"./TabsContent-BBisj5t9.js";import{Ai as a,Ca as o,Fi as s,Gi as c,Gn as l,Hi as u,Ii as d,J as ee,Ka as f,Li as p,Lt as te,M as ne,N as m,Pt as re,Ua as h,Ui as g,Va as _,ca as v,da as y,ft as b,la as x,n as S,oa as C,r as ie,sn as w,u as T,wa as E,zi as D}from"./index-D6Cod0pL.js";import"./en_US-LGbIKe0x.js";import"./common-HQCQB71w.js";import"./zh_CN-Cgumeokr.js";import"./useFullscreen-lrjpQVTw.js";import{t as O}from"./badge-O2q4qI2Q.js";import"./dist-D3XftLPo.js";import"./useTableColumns-qs-cYpaB.js";import{n as k,t as A}from"./CardContent-CMuL0LxG.js";import{t as j}from"./CardDescription-DXNpEJau.js";import{n as M,t as N}from"./CardTitle-D06OZslX.js";import{t as ae}from"./composables-CTAVZAup.js";import{n as P,r as F,t as I}from"./constants-OTiF8S51.js";var oe=c({__name:`Alert`,props:{class:{},variant:{}},setup(e){let t=e;return(n,r)=>(C(),D(`div`,{"data-slot":`alert`,class:h(_(w)(_(z)({variant:e.variant}),t.class)),role:`alert`},[x(n.$slots,`default`)],2))}}),L=c({__name:`AlertDescription`,props:{class:{}},setup(e){let t=e;return(e,n)=>(C(),D(`div`,{"data-slot":`alert-description`,class:h(_(w)(`text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed`,t.class))},[x(e.$slots,`default`)],2))}}),R=c({__name:`AlertTitle`,props:{class:{}},setup(e){let t=e;return(e,n)=>(C(),D(`div`,{"data-slot":`alert-title`,class:h(_(w)(`col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight`,t.class))},[x(e.$slots,`default`)],2))}});const z=ie(`relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current`,{variants:{variant:{default:`bg-card text-card-foreground`,destructive:`text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90`}},defaultVariants:{variant:`default`}});var B={class:`container mx-auto p-6 space-y-6`},V={class:`mt-2 space-y-1 text-sm`},H={class:`flex flex-wrap gap-2`},U={class:`space-y-2`},W={class:`flex flex-wrap gap-2`},G={class:`space-y-2`},K={class:`flex flex-wrap gap-2`},q={class:`space-y-2`},se={class:`flex flex-wrap gap-2`},ce={class:`space-y-2`},le={class:`flex flex-wrap gap-2`},ue={class:`space-y-2`},de={class:`grid gap-2`},fe={class:`text-sm`},pe={class:`space-y-2`},me={class:`grid gap-2`},he={class:`text-sm font-medium`},ge={class:`text-xs text-muted-foreground`},_e={class:`space-y-2`},ve={class:`flex flex-wrap gap-2`},ye={class:`space-y-2`},be={class:`flex flex-wrap gap-2`},xe={class:`space-y-2`},Se={class:`flex flex-wrap gap-2`},Ce={class:`space-y-2`},we={class:`p-4 bg-muted rounded-lg`},Te={class:`text-sm`},J={class:`text-sm`},Y=c({__name:`PermissionDemo`,setup(c){let{hasPermission:h,hasAnyPermission:x,hasAllPermissions:ie,hasRole:w,isAdmin:z,isAuthenticated:Y}=ae(),X=l(),Z=s(()=>X.user),Ee=s(()=>X.user?.permissions||[]),De=[{name:`用户创建权限 (user:create)`,code:F.CREATE},{name:`用户更新权限 (user:update)`,code:F.UPDATE},{name:`用户删除权限 (user:delete)`,code:F.DELETE},{name:`产品创建权限 (product:create)`,code:P.CREATE},{name:`订单审核权限 (order:audit)`,code:I.AUDIT}].map(e=>({name:e.name,code:e.code,hasPermission:s(()=>X.user?.permissions.includes(`*`)||X.user?.permissions.includes(e.code)||!1)})),Q=s(()=>X.user?.permissions.includes(`*`)||X.user?.permissions.includes(F.CREATE)||!1),$=s(()=>X.user?.permissions.includes(`*`)||X.user?.permissions.includes(F.UPDATE)||!1),Oe=s(()=>X.user?.permissions.includes(`*`)||X.user?.permissions.includes(F.DELETE)||!1),ke=[{name:`拥有任意用户权限（创建/更新/删除）`,result:s(()=>Q.value||$.value||Oe.value),description:`hasAnyPermission([user:create, user:update, user:delete])`},{name:`同时拥有用户创建和更新权限`,result:s(()=>Q.value&&$.value),description:`hasAllPermissions([user:create, user:update])`},{name:`是管理员角色`,result:s(()=>X.user?.role===`admin`),description:`hasRole('admin')`},{name:`是管理员（计算属性）`,result:z,description:`isAdmin.value`}],Ae=[{label:`管理员（全部权限）`,role:`admin`,permissions:[`*`]},{label:`编辑者（读写权限）`,role:`editor`,permissions:[`user:read`,`user:update`,`product:read`,`product:update`,`order:read`,`order:update`]},{label:`访客（只读权限）`,role:`viewer`,permissions:[`user:read`,`product:read`,`order:read`]},{label:`无权限`,role:`guest`,permissions:[]}],je=e=>{X.user&&(X.user.role=e.role,X.user.permissions=e.permissions)};return(s,c)=>{let l=y(`permission`),h=y(`role`);return C(),D(`div`,B,[c[49]||=d(`div`,{class:`space-y-2`},[d(`h1`,{class:`text-3xl font-bold tracking-tight`},`权限控制演示 (RBAC Demo)`),d(`p`,{class:`text-muted-foreground`},` 本页面展示如何使用 v-permission 指令和 usePermission 组合式函数进行权限控制 `)],-1),g(_(oe),null,{default:o(()=>[g(_(b),{class:`h-4 w-4`}),g(_(R),null,{default:o(()=>[...c[0]||=[u(`当前用户信息`,-1)]]),_:1}),g(_(L),null,{default:o(()=>[d(`div`,V,[d(`p`,null,[c[1]||=d(`strong`,null,`角色:`,-1),u(` `+f(_(Z)?.role||`未登录`),1)]),d(`p`,null,[c[2]||=d(`strong`,null,`权限列表:`,-1),u(` `+f(_(Ee).join(`, `)||`无`),1)]),d(`p`,null,[c[3]||=d(`strong`,null,`是否认证:`,-1),u(` `+f(_(Y)?`是`:`否`),1)])])]),_:1})]),_:1}),g(_(k),null,{default:o(()=>[g(_(M),null,{default:o(()=>[g(_(N),{class:`flex items-center gap-2`},{default:o(()=>[g(_(m),{class:`h-5 w-5`}),c[4]||=u(` 模拟权限切换（演示用） `,-1)]),_:1}),g(_(j),null,{default:o(()=>[...c[5]||=[u(`点击切换不同角色的权限，观察下方按钮和组件的变化`,-1)]]),_:1})]),_:1}),g(_(A),null,{default:o(()=>[d(`div`,H,[(C(),D(a,null,v(Ae,e=>g(_(S),{key:e.label,variant:`outline`,size:`sm`,onClick:t=>je(e)},{default:o(()=>[u(f(e.label),1)]),_:2},1032,[`onClick`])),64))])]),_:1})]),_:1}),g(_(n),{defaultValue:`directive`,class:`w-full`},{default:o(()=>[g(_(t),{class:`grid w-full grid-cols-3`},{default:o(()=>[g(_(r),{value:`directive`},{default:o(()=>[...c[6]||=[u(`指令方式 (v-permission)`,-1)]]),_:1}),g(_(r),{value:`composable`},{default:o(()=>[...c[7]||=[u(`组合式函数 (usePermission)`,-1)]]),_:1}),g(_(r),{value:`role`},{default:o(()=>[...c[8]||=[u(`角色控制 (v-role)`,-1)]]),_:1})]),_:1}),g(_(i),{value:`directive`,class:`space-y-4`},{default:o(()=>[g(_(k),null,{default:o(()=>[g(_(M),null,{default:o(()=>[g(_(N),null,{default:o(()=>[...c[9]||=[u(`v-permission 指令示例`,-1)]]),_:1}),g(_(j),null,{default:o(()=>[...c[10]||=[u(`使用 v-permission 指令控制按钮和元素的显示/隐藏`,-1)]]),_:1})]),_:1}),g(_(A),{class:`space-y-6`},{default:o(()=>[d(`div`,U,[c[14]||=d(`h4`,{class:`text-sm font-semibold`},`1. 单个权限检查`,-1),d(`div`,W,[E((C(),p(_(S),null,{default:o(()=>[g(_(T),{class:`h-4 w-4 mr-2`}),c[11]||=u(` 创建用户 `,-1)]),_:1})),[[l,_(F).CREATE]]),E((C(),p(_(S),{variant:`secondary`},{default:o(()=>[g(_(T),{class:`h-4 w-4 mr-2`}),c[12]||=u(` 编辑用户 `,-1)]),_:1})),[[l,_(F).UPDATE]]),E((C(),p(_(S),{variant:`destructive`},{default:o(()=>[g(_(T),{class:`h-4 w-4 mr-2`}),c[13]||=u(` 删除用户 `,-1)]),_:1})),[[l,_(F).DELETE]])]),c[15]||=d(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-permission="USER_PERMISSIONS.CREATE" `,-1)]),g(_(e)),d(`div`,G,[c[18]||=d(`h4`,{class:`text-sm font-semibold`},`2. 多个权限 - 任一通过 (v-permission:any)`,-1),d(`div`,K,[E((C(),p(_(S),null,{default:o(()=>[...c[16]||=[u(` 用户管理（创建或编辑） `,-1)]]),_:1})),[[l,[_(F).CREATE,_(F).UPDATE],`any`]]),E((C(),p(_(S),{variant:`secondary`},{default:o(()=>[g(_(ee),{class:`h-4 w-4 mr-2`}),c[17]||=u(` 产品管理 `,-1)]),_:1})),[[l,[_(P).CREATE,_(P).UPDATE],`any`]])]),c[19]||=d(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-permission:any="[USER_PERMISSIONS.CREATE, USER_PERMISSIONS.UPDATE]" `,-1)]),g(_(e)),d(`div`,q,[c[21]||=d(`h4`,{class:`text-sm font-semibold`},`3. 多个权限 - 全部通过 (v-permission:all)`,-1),d(`div`,se,[E((C(),p(_(S),null,{default:o(()=>[...c[20]||=[u(` 完整用户管理（需全部权限） `,-1)]]),_:1})),[[l,[_(F).CREATE,_(F).UPDATE,_(F).DELETE],`all`]])]),c[22]||=d(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-permission:all="[USER_PERMISSIONS.CREATE, USER_PERMISSIONS.UPDATE, USER_PERMISSIONS.DELETE]" `,-1)]),g(_(e)),d(`div`,ce,[c[25]||=d(`h4`,{class:`text-sm font-semibold`},`4. 禁用模式 (v-permission.disabled)`,-1),d(`div`,le,[E((C(),p(_(S),{variant:`destructive`},{default:o(()=>[...c[23]||=[u(` 删除（无权限时禁用） `,-1)]]),_:1})),[[l,_(F).DELETE,void 0,{disabled:!0}]]),E((C(),p(_(S),{variant:`secondary`},{default:o(()=>[g(_(ne),{class:`h-4 w-4 mr-2`}),c[24]||=u(` 审核订单 `,-1)]),_:1})),[[l,_(I).AUDIT,void 0,{disabled:!0}]])]),c[26]||=d(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-permission.disabled="USER_PERMISSIONS.DELETE" - 无权限时按钮禁用而非隐藏 `,-1)])]),_:1})]),_:1})]),_:1}),g(_(i),{value:`composable`,class:`space-y-4`},{default:o(()=>[g(_(k),null,{default:o(()=>[g(_(M),null,{default:o(()=>[g(_(N),null,{default:o(()=>[...c[27]||=[u(`usePermission 组合式函数示例`,-1)]]),_:1}),g(_(j),null,{default:o(()=>[...c[28]||=[u(`在 script setup 中使用组合式函数进行权限检查`,-1)]]),_:1})]),_:1}),g(_(A),{class:`space-y-6`},{default:o(()=>[d(`div`,ue,[c[29]||=d(`h4`,{class:`text-sm font-semibold`},`单个权限检查结果`,-1),d(`div`,de,[(C(!0),D(a,null,v(_(De),e=>(C(),D(`div`,{key:e.code,class:`flex items-center justify-between p-2 rounded border`},[d(`span`,fe,f(e.name),1),g(_(O),{variant:e.hasPermission.value?`default`:`secondary`},{default:o(()=>[e.hasPermission.value?(C(),p(_(te),{key:0,class:`h-3 w-3 mr-1`})):(C(),p(_(re),{key:1,class:`h-3 w-3 mr-1`})),u(` `+f(e.hasPermission.value?`有权限`:`无权限`),1)]),_:2},1032,[`variant`])]))),128))])]),g(_(e)),d(`div`,pe,[c[30]||=d(`h4`,{class:`text-sm font-semibold`},`组合权限检查结果`,-1),d(`div`,me,[(C(),D(a,null,v(ke,e=>d(`div`,{key:e.name,class:`flex items-center justify-between p-2 rounded border`},[d(`div`,null,[d(`p`,he,f(e.name),1),d(`p`,ge,f(e.description),1)]),g(_(O),{variant:e.result.value?`default`:`secondary`},{default:o(()=>[u(f(e.result.value?`通过`:`未通过`),1)]),_:2},1032,[`variant`])])),64))])]),g(_(e)),c[31]||=d(`div`,{class:`space-y-2`},[d(`h4`,{class:`text-sm font-semibold`},`使用示例代码`),d(`pre`,{class:`p-4 bg-muted rounded-lg text-xs overflow-x-auto`},[d(`code`,null,`// 在 script setup 中使用
const { hasPermission, hasAnyPermission, hasAllPermissions } = usePermission()

// 检查单个权限
const canCreate = hasPermission(USER_PERMISSIONS.CREATE)

// 检查任一权限
const canEdit = hasAnyPermission([USER_PERMISSIONS.CREATE, USER_PERMISSIONS.UPDATE])

// 检查全部权限
const canManage = hasAllPermissions([USER_PERMISSIONS.CREATE, USER_PERMISSIONS.UPDATE, USER_PERMISSIONS.DELETE])

// 在模板中使用
<Button :disabled="!canCreate">创建</Button>`)])],-1)]),_:1})]),_:1})]),_:1}),g(_(i),{value:`role`,class:`space-y-4`},{default:o(()=>[g(_(k),null,{default:o(()=>[g(_(M),null,{default:o(()=>[g(_(N),null,{default:o(()=>[...c[32]||=[u(`v-role 角色控制示例`,-1)]]),_:1}),g(_(j),null,{default:o(()=>[...c[33]||=[u(`使用 v-role 指令基于角色控制元素显示`,-1)]]),_:1})]),_:1}),g(_(A),{class:`space-y-6`},{default:o(()=>[d(`div`,_e,[c[36]||=d(`h4`,{class:`text-sm font-semibold`},`1. 单个角色检查`,-1),d(`div`,ve,[E((C(),p(_(S),{variant:`default`},{default:o(()=>[g(_(m),{class:`h-4 w-4 mr-2`}),c[34]||=u(` 仅管理员可见 `,-1)]),_:1})),[[h,`admin`]]),E((C(),p(_(S),{variant:`secondary`},{default:o(()=>[...c[35]||=[u(` 仅编辑者可见 `,-1)]]),_:1})),[[h,`editor`]])]),c[37]||=d(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-role="'admin'" - 仅 admin 角色可见 `,-1)]),g(_(e)),d(`div`,ye,[c[39]||=d(`h4`,{class:`text-sm font-semibold`},`2. 多个角色 - 任一通过 (v-role:any)`,-1),d(`div`,be,[E((C(),p(_(S),{variant:`default`},{default:o(()=>[g(_(m),{class:`h-4 w-4 mr-2`}),c[38]||=u(` 管理员或编辑者可见 `,-1)]),_:1})),[[h,[`admin`,`editor`],`any`]])]),c[40]||=d(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-role:any="['admin', 'editor']" - admin 或 editor 角色可见 `,-1)]),g(_(e)),d(`div`,xe,[c[42]||=d(`h4`,{class:`text-sm font-semibold`},`3. 角色禁用模式 (v-role.disabled)`,-1),d(`div`,Se,[E((C(),p(_(S),{variant:`destructive`},{default:o(()=>[...c[41]||=[u(` 管理员操作（无权限时禁用） `,-1)]]),_:1})),[[h,`admin`,void 0,{disabled:!0}]])]),c[43]||=d(`p`,{class:`text-xs text-muted-foreground`},` 代码: v-role.disabled="'admin'" - 非 admin 角色时按钮禁用 `,-1)]),g(_(e)),d(`div`,Ce,[c[46]||=d(`h4`,{class:`text-sm font-semibold`},`当前角色信息`,-1),d(`div`,we,[d(`p`,Te,[c[44]||=d(`strong`,null,`当前角色:`,-1),u(` `+f(_(Z)?.role||`未登录`),1)]),d(`p`,J,[c[45]||=d(`strong`,null,`是否管理员:`,-1),u(` `+f(_(z)?`是`:`否`),1)])])])]),_:1})]),_:1})]),_:1})]),_:1}),g(_(k),null,{default:o(()=>[g(_(M),null,{default:o(()=>[g(_(N),null,{default:o(()=>[...c[47]||=[u(`使用说明`,-1)]]),_:1})]),_:1}),g(_(A),{class:`space-y-4`},{default:o(()=>[...c[48]||=[d(`div`,{class:`grid gap-4 md:grid-cols-2`},[d(`div`,{class:`space-y-2`},[d(`h4`,{class:`font-semibold`},`指令方式 (模板中直接使用)`),d(`ul`,{class:`text-sm text-muted-foreground space-y-1 list-disc list-inside`},[d(`li`,null,`v-permission="'user:create'" - 单个权限`),d(`li`,null,`v-permission:any="[...]" - 任一权限`),d(`li`,null,`v-permission:all="[...]" - 全部权限`),d(`li`,null,`v-permission.disabled="..." - 禁用模式`),d(`li`,null,`v-role="'admin'" - 角色检查`)])]),d(`div`,{class:`space-y-2`},[d(`h4`,{class:`font-semibold`},`组合式函数方式 (script setup 中使用)`),d(`ul`,{class:`text-sm text-muted-foreground space-y-1 list-disc list-inside`},[d(`li`,null,`hasPermission(permission) - 检查单个权限`),d(`li`,null,`hasAnyPermission([...]) - 任一权限通过`),d(`li`,null,`hasAllPermissions([...]) - 全部权限通过`),d(`li`,null,`hasRole(role) - 检查角色`),d(`li`,null,`isAdmin - 是否管理员`)])])],-1)]]),_:1})]),_:1})])}}});export{Y as default};